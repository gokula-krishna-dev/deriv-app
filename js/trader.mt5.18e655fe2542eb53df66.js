(window.webpackJsonp_deriv_trader=window.webpackJsonp_deriv_trader||[]).push([["mt5"],{"./Modules/MT5/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"MT5PasswordModal",(function(){return k})),n.d(t,"MT5ServerErrorDialog",(function(){return q})),n.d(t,"default",(function(){return qa}));var a=n("../node_modules/formik/dist/formik.esm.js"),r=n("../node_modules/prop-types/index.js"),o=n.n(r),c=n("react"),i=n("react-router"),s=n("@deriv/components/lib/form-submit-button"),l=n.n(s),u=(n("@deriv/components/lib/form-submit-button.css"),n("@deriv/components/lib/icon")),m=n.n(u),d=(n("@deriv/components/lib/icon.css"),n("@deriv/components/lib/modal")),p=n.n(d),f=(n("@deriv/components/lib/modal.css"),n("@deriv/components/lib/password-input")),_=n.n(f),b=(n("@deriv/components/lib/password-input.css"),n("@deriv/components/lib/password-meter")),h=n.n(b),y=(n("@deriv/components/lib/password-meter.css"),n("@deriv/shared/utils/routes")),g=n.n(y),v=n("@deriv/translations"),w=n("../node_modules/classnames/index.js"),E=n.n(w),O=n("@deriv/components/lib/button"),j=n.n(O),z=(n("@deriv/components/lib/button.css"),function(e){var t=e.classNameMessage,n=void 0===t?void 0:t,a=e.has_cancel,r=e.has_submit,o=e.icon,i=e.message,s=e.onCancel,l=e.onSubmit,u=e.heading,d=e.icon_size,f=e.text_submit,_=e.text_cancel,b=e.is_open,h=e.toggleModal,y=e.title,g=e.has_close_icon,w=e.width,O=void 0===w?void 0:w,z=function(){return o||null},S=function(e){var t=e.className;return c.createElement(m.a,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})};return c.createElement(p.a,{className:"mt5-success-dialog",is_open:b,toggleModal:h,has_close_icon:g,small:!y,title:y,width:O},c.createElement(p.a.Body,null,c.createElement("div",{className:E()("success-change__icon-area",{"success-change__icon-area--large":"large"===d,"success-change__icon-area--xlarge":"xlarge"===d})},c.createElement(z,null),c.createElement(S,{className:"bottom-right-overlay"})),!u&&c.createElement("h2",{className:"dc-modal-header__title"},c.createElement(v.Localize,{i18n_default_text:"Success!"})),u&&u,c.isValidElement(i)&&i,!c.isValidElement(i)&&c.createElement("p",{className:n},i)),c.createElement(p.a.Footer,null,a&&c.createElement(j.a,{onClick:s,has_effect:!0,text:_||Object(v.localize)("Maybe later"),secondary:!0,large:!0}),r&&c.createElement(j.a,{has_effect:!0,onClick:l,text:f,primary:!0,large:!0})))});z.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},z.propTypes={classNameMessage:o.a.string,has_cancel:o.a.bool,has_submit:o.a.bool,heading:o.a.oneOfType([o.a.string,o.a.object]),icon:o.a.object,icon_size:o.a.string,icon_type:o.a.string,message:o.a.oneOfType([o.a.string,o.a.object]),onCancel:o.a.func,onSubmit:o.a.func,text_submit:o.a.string};var S=z,x=(n("./sass/app/modules/mt5/mt5.scss"),n("./Stores/connect.js")),N=n("./Utils/Validator/declarative-validation-rules.js"),P=function(e,t){return"real"===t?Object(v.localize)("You have created a DMT5 {{account_title}} account. To start trading, transfer funds from your Deriv account into this account.",{account_title:e}):Object(v.localize)("You have created a DMT5 {{account_title}} account.",{account_title:e})},M=function(e){var t=e.account_title,n=e.account_type,r=e.disableMt5PasswordModal,o=e.form_error,i=e.history,s=e.has_mt5_error,u=e.is_mt5_password_modal_enabled,d=e.is_mt5_success_dialog_enabled,f=e.setMt5SuccessDialog,b=e.setMt5Error,y=e.submitMt5Password,w=function(){f(!1),b(!1)},E=function(){w(),r()},O=function(){return function(e){switch(e){case"synthetic":return c.createElement(m.a,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return c.createElement(m.a,{icon:"IcMt5FinancialPlatform",size:128});default:return c.createElement(m.a,{icon:"IcMt5FinancialStpPlatform",size:128})}}(n.type)},j=u&&!s&&!d,z=!s&&d,x="real_financial_stp"===[n.category,n.type].join("_");return c.createElement(c.Fragment,null,c.createElement(p.a,{className:"mt5-password-modal",is_open:j,toggleModal:E,has_close_icon:!0},c.createElement(a.c,{initialValues:{password:""},validate:function(e){var t={};return Object(N.c)(e.password,{min:8,max:25})?Object(N.d)(e.password)||(t.password=Object(v.localize)("You need to include uppercase and lowercase letters, and numbers.")):t.password=Object(v.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},onSubmit:function(e,t){y(e.password,t.setSubmitting)}},(function(e){var n=e.handleSubmit,a=e.setFieldTouched,r=e.handleChange,i=e.handleBlur,s=e.errors,u=e.values,m=e.isSubmitting,d=e.touched;return c.createElement("form",{onSubmit:n},c.createElement("h2",null,c.createElement(v.Localize,{i18n_default_text:"Choose a password for your DMT5 {{ account_type }} account",values:{account_type:t}})),c.createElement("div",{className:"dc-modal__container_mt5-password-modal__body"},c.createElement("div",{className:"input-element"},c.createElement(h.a,{input:u.password,has_error:!(!d.password||!s.password)},(function(e){var t=e.has_warning;return c.createElement(_.a,{autoComplete:"password",label:Object(v.localize)("Create a password"),error:d.password&&s.password,hint:!t&&Object(v.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),name:"password",value:u.password,onBlur:i,onChange:function(e){a("password",!0),r(e)}})}))),x&&c.createElement("div",{className:"dc-modal__container_mt5-password-modal__description"},c.createElement(v.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Binary (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Services Authority (LFSA). All other accounts, including your Deriv account, are not subject to the regulations and guidelines of the Labuan Financial Services Authority (LFSA)."}))),c.createElement(l.a,{is_disabled:m||!u.password||Object.keys(s).length>0,has_cancel:!0,cancel_label:Object(v.localize)("Cancel"),onCancel:E,is_loading:m,label:Object(v.localize)("Add account"),form_error:o}))}))),c.createElement(S,{is_open:z,toggleModal:E,onCancel:E,onSubmit:function(){r(),w(),"real"===n.category&&i.push(g.a.cashier_acc_transfer)},classNameMessage:"mt5-password-modal__message",message:P(t,n.category),icon:c.createElement(O,null),icon_size:"xlarge",text_submit:"real"===n.category?Object(v.localize)("Transfer now"):Object(v.localize)("OK"),has_cancel:"real"===n.category}))};M.propTypes={account_title:o.a.string,account_type:o.a.object,disableMt5PasswordModal:o.a.func,error_message:o.a.string,has_mt5_error:o.a.bool,is_mt5_password_modal_enabled:o.a.bool,is_mt5_success_dialog_enabled:o.a.bool,setMt5Error:o.a.func,setMt5SuccessDialog:o.a.func,submitMt5Password:o.a.func};var k=Object(x.b)((function(e){var t=e.modules;return{account_title:t.mt5.account_title,account_type:t.mt5.account_type,disableMt5PasswordModal:t.mt5.disableMt5PasswordModal,error_message:t.mt5.error_message,has_mt5_error:t.mt5.has_mt5_error,is_mt5_success_dialog_enabled:t.mt5.is_mt5_success_dialog_enabled,is_mt5_password_modal_enabled:t.mt5.is_mt5_password_modal_enabled,setMt5Error:t.mt5.setError,setMt5SuccessDialog:t.mt5.setMt5SuccessDialog,submitMt5Password:t.mt5.submitMt5Password}}))(Object(i.withRouter)(M)),A=n("@deriv/components/lib/dialog"),C=n.n(A);n("@deriv/components/lib/dialog.css");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=U(e);if(t){var r=U(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(o,e);var t,n,a,r=F(o);function o(){return D(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.has_mt5_error&&!this.props.is_mt5_success_dialog_enabled;return c.createElement(C.a,{title:Object(v.localize)("Somethingâ€™s not right"),confirm_button_text:Object(v.localize)("OK"),onConfirm:this.props.clearMt5Error,disableApp:this.props.disableApp,enableApp:this.props.enableApp,is_visible:e},this.props.error_message||c.createElement(v.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))}}])&&R(t.prototype,n),a&&R(t,a),o}(c.Component);V.propTypes={clearMt5Error:o.a.func,disableApp:o.a.func,enableApp:o.a.func,error_message:o.a.string,has_mt5_error:o.a.bool,is_mt5_success_dialog_enabled:o.a.bool};var q=Object(x.b)((function(e){var t=e.ui,n=e.modules;return{clearMt5Error:n.mt5.clearMt5Error,disableApp:t.disableApp,enableApp:t.enableApp,error_message:n.mt5.error_message,has_mt5_error:n.mt5.has_mt5_error,is_mt5_success_dialog_enabled:n.mt5.is_mt5_success_dialog_enabled}}))(V),B=n("@deriv/components/lib/desktop-wrapper"),W=n.n(B),Y=(n("@deriv/components/lib/desktop-wrapper.css"),n("@deriv/components/lib/mobile-wrapper")),K=n.n(Y),$=(n("@deriv/components/lib/mobile-wrapper.css"),n("@deriv/components/lib/tabs")),H=n.n($),X=(n("@deriv/components/lib/tabs.css"),n("./templates/_common/components/loading.jsx")),G=function(){return c.createElement("div",{className:"mt5-real-accounts-display"},c.createElement(X.a,null))},Z=function(e){var t=e.onClickSignup;return c.createElement("div",{className:"mt5-dashboard__missing-real"},c.createElement("h1",{className:"mt5-dashboard__missing-real--heading"},c.createElement(v.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."})),c.createElement(j.a,{className:"mt5-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},c.createElement("span",{className:"btn__text"},c.createElement(v.Localize,{i18n_default_text:"Create a Deriv account"}))))};Z.propTypes={onClickSignup:o.a.func};var J=Z,Q=n("@deriv/components/lib/mobile-dialog"),ee=n.n(Q),te=(n("@deriv/components/lib/mobile-dialog.css"),n("@deriv/components/lib/form-progress")),ne=n.n(te),ae=(n("@deriv/components/lib/form-progress.css"),n("@deriv/components/lib/div100vh-container")),re=n.n(ae),oe=(n("@deriv/components/lib/div100vh-container.css"),n("@deriv/shared/utils/object")),ce=n("@deriv/shared/utils/screen"),ie=n("./Services/ws-methods.js"),se=n("@deriv/components/lib/auto-height-wrapper"),le=n.n(se),ue=n("@deriv/components/lib/themed-scrollbars"),me=n.n(ue),de=(n("@deriv/components/lib/themed-scrollbars.css"),n("@deriv/components/lib/dropdown")),pe=n.n(de),fe=(n("@deriv/components/lib/dropdown.css"),n("@deriv/components/lib/loading")),_e=n.n(fe),be=(n("@deriv/components/lib/loading.css"),n("@deriv/components/lib/select-native")),he=n.n(be),ye=(n("@deriv/components/lib/select-native.css"),n("@deriv/account/dist/js/file-uploader-container")),ge=n.n(ye),ve=n("@deriv/account/dist/js/form-sub-header"),we=n.n(ve),Ee=n("@deriv/account/dist/js/poa-expired"),Oe=n.n(Ee),je=n("@deriv/account/dist/js/poa-needs-review"),ze=n.n(je),Se=n("@deriv/account/dist/js/poa-verified"),xe=n.n(Se),Ne=n("@deriv/account/dist/js/poa-unverified"),Pe=n.n(Ne),Me=n("@deriv/account/dist/js/poa-submitted"),ke=n.n(Me),Ae=n("@deriv/account/dist/js/poa-status-codes"),Ce=n.n(Ae),Te=n("@deriv/components/lib/autocomplete"),De=n.n(Te),Re=(n("@deriv/components/lib/autocomplete.css"),n("@deriv/components/lib/input")),Ie=n.n(Re);n("@deriv/components/lib/input.css");function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var We=function(e){var t=e.name,n=e.optional,r=void 0!==n&&n,o=Be(e,["name","optional"]);return c.createElement(a.a,{name:t},(function(e){var n=e.field,a=e.form,i=a.errors,s=a.touched;return c.createElement(Ie.a,qe({type:"text",required:!r,name:t,autoComplete:"off",maxLength:"30",error:s[n.name]&&i[n.name]},n,o))}))},Ye=function(e,t,n){var a={citizen:[function(e){return!!e},function(e){return t.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return t.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!!e},function(e){return/^[\w-]{0,20}$/.test(e)}],account_opening_reason:[function(e){return!!e},function(e){return n.map((function(e){return e.text})).includes(e)}]},r={citizen:Object(v.localize)("Citizenship"),tax_residence:Object(v.localize)("Tax residence"),tax_identification_number:Object(v.localize)("Tax identification number"),account_opening_reason:Object(v.localize)("Account opening reason")},o=[Object(v.localize)("{{field_name}} is required"),Object(v.localize)("{{field_name}} is not properly formatted.")],i={};return Object.entries(a).forEach((function(t){var n=Ue(t,2),a=n[0],s=n[1].findIndex((function(t){return!t(e[a])}));-1!==s&&(i[a]=i[a]=c.createElement(v.Localize,{i18n_default_text:o[s],values:{field_name:r[a]}}))})),i},Ke=function(e,t,n,a,r,o){var c=e.citizen,i=e.tax_residence,s=Be(e,["citizen","tax_residence"]),l=function(e,t,n){var a,r;return n.forEach((function(n){n.text===e&&(a=n),n.text===t&&(r=n)})),{citizen:a,tax_residence:r}}(c,i,o),u=l.citizen,m=l.tax_residence;a(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({citizen:void 0!==u?u.value:"",tax_residence:void 0!==m?m.value:""},s),t.setSubmitting,r)},$e=function(e){var t=e.onSave,n=e.is_fully_authenticated,r=e.residence_list,o=e.onCancel,i=e.onSubmit,s=e.value,u=e.index,m=!1,d=[{text:Object(v.localize)("Hedging"),value:"Hedging"},{text:Object(v.localize)("Income Earning"),value:"Income Earning"},{text:Object(v.localize)("Speculative"),value:"Speculative"},{text:Object(v.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],p=function(e){t(u,e),o()};return 0===r.length?c.createElement(_e.a,{is_fullscreen:!1}):c.createElement(a.c,{initialValues:{citizen:s.citizen,tax_residence:s.tax_residence,tax_identification_number:s.tax_identification_number,account_opening_reason:s.account_opening_reason},enableReinitialize:!0,isInitialValid:function(e){var t=e.initialValues,n=Ye(t,r,d);return m=0===Object.entries(n).length&&n.constructor===Object,n},validate:function(e){return Ye(e,r,d)},onSubmit:function(e,t){return Ke(e,t,u,i,!Object(oe.isDeepEqual)(s,e),r)}},(function(e){var t=e.handleSubmit,o=e.isSubmitting,i=e.handleChange,u=e.handleBlur,f=e.errors,_=e.touched,b=e.values,h=e.setFieldValue;return c.createElement(le.a,{default_height:200},(function(e){var y=e.height,g=e.setRef;return c.createElement("form",{className:"mt5-financial-stp-modal__form",ref:g,onSubmit:t,autoComplete:"off"},c.createElement(re.a,{className:E()("details-form","mt5-details-form"),is_disabled:Object(ce.isDesktop)(),height_offset:"199px"},c.createElement("p",{className:"details-form__description"},c.createElement(v.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),c.createElement(me.a,{height:"calc(".concat(y,"px - 120px)"),is_bypassed:Object(ce.isMobile)()},c.createElement("div",{className:"details-form__elements"},c.createElement(we.a,{title:Object(v.localize)("Details")}),c.createElement("fieldset",{className:"account-form__fieldset"},c.createElement(W.a,null,c.createElement(a.a,{name:"citizen"},(function(e){var t=e.field;return c.createElement(De.a,qe({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:Object(v.localize)("Citizenship"),error:_.citizen&&f.citizen,disabled:s.citizen&&n,list_items:r,onItemSelection:function(e){return h("citizen",e.value?e.text:"",!0)},required:!0}))}))),c.createElement(K.a,null,c.createElement(he.a,{label:Object(v.localize)("Citizenship"),value:b.citizen,list_items:r,error:_.citizen&&f.citizen,disabled:s.citizen&&n,use_text:!0,onChange:function(e){return h("citizen",e.target.value,!0)},required:!0}))),c.createElement(we.a,{title:Object(v.localize)("Tax information")}),c.createElement("fieldset",{className:"account-form__fieldset"},c.createElement(W.a,null,c.createElement(a.a,{name:"tax_residence"},(function(e){var t=e.field;return c.createElement(De.a,qe({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",list_height:"160px",autoComplete:"off",label:Object(v.localize)("Tax residence"),error:_.tax_residence&&f.tax_residence,disabled:s.tax_residence&&n,list_items:r,onItemSelection:function(e){var t=e.value,n=e.text;return h("tax_residence",t?n:"",!0)}},t))}))),c.createElement(K.a,null,c.createElement(he.a,{label:Object(v.localize)("Tax residence"),value:b.tax_residence,error:_.tax_residence&&f.tax_residence,disabled:s.tax_residence&&n,list_items:r,use_text:!0,onChange:function(e){return h("tax_residence",e.target.value,!0)},required:!0}))),c.createElement(We,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",placeholder:Object(v.localize)("Tax identification number"),value:b.tax_identification_number,onBlur:u}),c.createElement(we.a,{title:Object(v.localize)("Account opening reason")}),c.createElement(a.a,{name:"account_opening_reason"},(function(e){var t=e.field;return c.createElement(c.Fragment,null,c.createElement(W.a,null,c.createElement(pe.a,qe({placeholder:Object(v.localize)("Account opening reason"),is_align_text_left:!0,is_alignment_top:!0,name:t.name,list:d,value:b.account_opening_reason,onChange:i,handleBlur:u,error:_.account_opening_reason&&f.account_opening_reason},t,{required:!0}))),c.createElement(K.a,null,c.createElement(he.a,qe({name:t.name,label:Object(v.localize)("Account opening reason"),list_items:d,value:b.account_opening_reason,use_text:!0,error:_.account_opening_reason&&f.account_opening_reason,onChange:function(e){i(e),h("account_opening_reason",e.target.value,!0)}},t,{required:!0}))))}))))),c.createElement(l.a,{cancel_label:Object(v.localize)("Previous"),is_disabled:o||0===Object.keys(_).length&&!m||Object.keys(_).length>0&&Object.keys(f).length>0,label:Object(v.localize)("Next"),onCancel:function(){return p(b)}}))}))}))};$e.propTypes={is_fully_authenticated:o.a.bool,onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,residence_list:o.a.array,value:o.a.object};var He=$e;function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ze(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){Ze(o,a,r,c,i,"next",e)}function i(e){Ze(o,a,r,c,i,"throw",e)}c(void 0)}))}}function Qe(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=st(e);if(t){var r=st(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return it(this,n)}}function it(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lt=c.createRef(),ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(i,e);var t,n,r,o=ct(i);function i(){var e;at(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).file_uploader_ref=void 0,e.state={document_file:void 0,file_error_message:void 0,form_error:"",poa_status:"none",is_loading:!0,resubmit_poa:!1,has_poi:!1},e.validateForm=function(t){if([Ce.a.verified,Ce.a.pending].includes(e.state.poa_status))return{};var n={address_line_1:[function(e){return!!e},function(e){return Object(N.b)(e)}],address_line_2:[function(e){return!e||Object(N.b)(e)}],address_city:[function(e){return!!e},function(e){return Object(N.c)(e,{min:1,max:35})}],address_state:[function(e){return!!e},function(e){return!e||Object(N.c)(e,{min:1,max:35})}],address_postcode:[function(e){return Object(N.c)(e,{min:1,max:20})},function(e){return Object(N.e)(e)}],document_file:[function(e){return!!e},function(e){return!!et(e,1)[0].name}]},a={address_line_1:[Object(v.localize)("First line of address is required"),Object(v.localize)("First line of address is not in a proper format.")],address_line_2:[Object(v.localize)("Second line of address is not in a proper format.")],address_city:[Object(v.localize)("Town/City is required"),Object(v.localize)("Town/City is not in a proper format.")],address_state:[Object(v.localize)("State/Province is required"),Object(v.localize)("State/Province is not in a proper format.")],address_postcode:[Object(v.localize)("Please enter a {{field_name}} under {{max_number}} characters.",{field_name:Object(v.localize)("postal/ZIP code"),max_number:20,interpolation:{escapeValue:!1}}),Object(v.localize)("Only letters, numbers, space, and hyphen are allowed.")],document_file:[Object(v.localize)("Document file is not in a proper format.")]},r={};return Object.entries(n).forEach((function(e){var n=et(e,2),o=n[0],c=n[1].findIndex((function(e){return!e(t[o])}));-1!==c&&(r[o]=a[o][c])})),r},e.handleCancel=function(t){e.props.onSave(e.props.index,t),e.props.onCancel()},e.onFileDrop=function(t,n,a,r){a("document_file",!0),r("document_file",t),e.setState({document_file:t,file_error_message:n})},e.proceed=function(){var t;(t=e.props).onSubmit.apply(t,[e.props.index].concat(Qe(e.state)))},e.onSubmit=function(){var t=Je(regeneratorRuntime.mark((function t(n,a){var r,o,c,i,s,l,u,m,d,p,f,_,b,h,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.document_file,r=Ge(n,["document_file"]),a.setSubmitting(!0),t.next=4,ie.a.setSettings(r);case 4:if(!(o=t.sent).error){t.next=9;break}return e.setState({form_error:o.error.message}),a.setSubmitting(!1),t.abrupt("return");case 9:return t.next=11,ie.a.authorized.storage.getSettings();case 11:if(c=t.sent,i=c.error,s=c.get_settings,!i){t.next=17;break}return e.setState({form_error:i.message}),t.abrupt("return");case 17:return l=s.address_line_1,u=s.address_line_2,m=s.address_city,d=s.address_state,p=s.address_postcode,e.setState({address_line_1:l,address_line_2:u,address_city:m,address_postcode:p,address_state:d,form_error:""}),t.prev=19,t.next=22,e.file_uploader_ref.current.upload();case 22:if(!(f=t.sent).warning){t.next=27;break}return e.setState({form_error:f.warning}),a.setSubmitting(!1),t.abrupt("return");case 27:return t.next=29,ie.a.authorized.storage.getAccountStatus();case 29:if(_=t.sent,b=_.error,h=_.get_account_status,!b){t.next=36;break}return e.setState({form_error:i.message}),a.setSubmitting(!1),t.abrupt("return");case 36:y=h.authentication.identity,!(y&&"none"===y.status)?e.proceed():(e.setState({form_error:Object(v.localize)("Identity confirmation failed. You will be redirected to the previous step.")}),setTimeout((function(){e.handleCancel(s)}),3e3)),t.next=44;break;case 41:t.prev=41,t.t0=t.catch(19),e.setState({form_error:t.t0.message});case 44:a.setSubmitting(!1),e.props.onSave(e.props.index,n),e.props.onSubmit(e.props.index,n,a.setSubmitting);case 47:case"end":return t.stop()}}),t,null,[[19,41]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleResubmit=function(){e.setState({resubmit_poa:!0})},e.setFileUploadRef=function(t){e.file_uploader_ref=t},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;ie.a.authorized.getAccountStatus().then((function(t){var n=t.get_account_status.authentication,a=n.document,r=n.identity,o=!(!r||"none"!==r.status);e.setState({poa_status:a.status,has_poi:o,is_loading:!1}),e.props.refreshNotifications()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.states_list,r=t.value,o=r.address_line_1,i=r.address_line_2,s=r.address_city,u=r.address_state,m=r.address_postcode,d=this.state,p=d.is_loading,f=d.resubmit_poa,_=d.submitted_poa,b=!p&&(f||this.state.poa_status===Ce.a.none);return c.createElement(a.c,{initialValues:{address_line_1:o,address_line_2:i,address_city:s,address_state:u,address_postcode:m,document_file:this.state.document_file},isInitialValid:function(t){var n=t.initialValues;return e.validateForm(n)},validate:this.validateForm,onSubmit:this.onSubmit,ref:lt},(function(t){var r=t.errors,o=t.handleSubmit,i=t.isSubmitting,s=t.handleChange,u=t.setFieldTouched,m=t.setFieldValue,d=t.values,h=t.touched;return c.createElement(le.a,{default_height:200},(function(t){var y=t.setRef,g=t.height;return c.createElement("form",{ref:y,onSubmit:o,className:"mt5-proof-of-address"},c.createElement(re.a,{className:"details-form",height_offset:"110px",is_disabled:Object(ce.isDesktop)()},p&&c.createElement(_e.a,{is_fullscreen:!1,className:"account___intial-loader"}),b&&c.createElement(me.a,{autohide:!1,height:"calc(".concat(g,"px - 100px)"),is_bypassed:Object(ce.isMobile)()},c.createElement("div",{className:"mt5-proof-of-address__field-area"},c.createElement(we.a,{subtitle:Object(v.localize)("(All fields are required)"),title:Object(v.localize)("Address information")}),c.createElement(We,{name:"address_line_1",required:!0,label:Object(v.localize)("First line of address"),placeholder:Object(v.localize)("First line of address")}),c.createElement(We,{name:"address_line_2",label:Object(v.localize)("Second line of address (optional)"),optional:!0,placeholder:Object(v.localize)("Second line of address")}),c.createElement("div",{className:"mt5-proof-of-address__inline-fields"},c.createElement(We,{name:"address_city",required:!0,label:Object(v.localize)("Town/City"),placeholder:Object(v.localize)("Town/City")}),c.createElement("fieldset",{className:"address-state__fieldset"},c.createElement(W.a,null,c.createElement(a.a,{name:"address_state"},(function(e){var t=e.field;return c.createElement(pe.a,{is_alignment_top:window.innerHeight<930,id:"address_state",required:!0,className:"address_state-dropdown",is_align_text_left:!0,list:n,error:h[t.name]&&r[t.name],name:"address_state",value:d.address_state,onChange:s,placeholder:Object(v.localize)("State/Province")})}))),c.createElement(K.a,null,c.createElement(he.a,{label:Object(v.localize)("State/Province"),value:d.address_state,list_items:n,error:h.address_state&&r.address_state,use_text:!0,onChange:function(e){return m("address_state",e.target.value,!0)}}))),c.createElement(We,{name:"address_postcode",label:Object(v.localize)("Postal/ZIP code"),placeholder:Object(v.localize)("Postal/ZIP code")})),c.createElement("div",{className:"mt5-proof-of-address__file-upload"},c.createElement(ge.a,{onRef:function(t){return e.setFileUploadRef(t)},getSocket:ie.a.getSocket,onFileDrop:function(t){var n=t.document_file,a=t.file_error_message;return e.onFileDrop(n,a,u,m)}}),r.document_file&&h.document_file&&c.createElement("p",{className:"dc-field-error"},r.document_file)))),e.state.poa_status!==Ce.a.none&&!f&&c.createElement(me.a,{height:g},_&&c.createElement(ke.a,{is_description_disabled:!0,has_poi:e.state.has_poi}),e.state.poa_status===Ce.a.pending&&c.createElement(ze.a,{is_description_disabled:!0}),e.state.poa_status===Ce.a.verified&&c.createElement(xe.a,{is_description_disabled:!0,has_poi:e.state.has_poi}),e.state.poa_status===Ce.a.expired&&c.createElement(Oe.a,{onClick:e.handleResubmit}),(e.state.poa_status===Ce.a.rejected||e.state.poa_status===Ce.a.suspected)&&c.createElement(Pe.a,null)),b&&c.createElement(l.a,{has_cancel:!0,cancel_label:Object(v.localize)("Previous"),is_disabled:!!Object.keys(r).length||i,label:Object(v.localize)("Next"),is_loading:i,form_error:e.state.form_error,onCancel:function(){return e.handleCancel(d)}})))}))}))}}])&&rt(t.prototype,n),r&&rt(t,r),i}(c.Component);ut.propTypes={onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,storeProofOfAddress:o.a.func,value:o.a.object};var mt=ut,dt=n("@deriv/account/dist/js/proof-of-identity-container"),pt=n.n(dt);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=wt(e);if(t){var r=wt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return vt(this,n)}}function vt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(i,e);var t,n,r,o=gt(i);function i(){var e;bt(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).state={poi_state:"none"},e.onStateChange=function(t){var n=t.status;return e.setState({poi_state:n})},e.validateForm=function(){var t={};return["pending","verified"].includes(e.state.poi_state)||(t.poi_state=!0),t},e}return t=i,(n=[{key:"render",value:function(){var e=this;return c.createElement(a.c,{initialValues:{poi_state:this.props.value.poi_state},validate:this.validateForm,onSubmit:function(t,n){return e.props.onSubmit(e.props.index,{poi_state:e.state.poi_state},n.setSubmitting)}},(function(t){var n=t.handleSubmit;return c.createElement(le.a,{default_height:200},(function(t){var a=t.setRef,r=t.height;return c.createElement("form",{ref:a,className:"mt5-proof-of-identity",onSubmit:n},c.createElement("div",{className:"details-form"},c.createElement("input",{type:"hidden",name:"poi_state",value:e.state.poi_state,readOnly:!0}),c.createElement(re.a,{className:"mt5-proof-of-identity__fields",height_offset:"180px",is_disabled:Object(ce.isDesktop)()},c.createElement(pt.a,_t({},e.props,{serviceToken:ie.a.serviceToken,notificationEvent:ie.a.notificationEvent,getAccountStatus:ie.a.authorized.getAccountStatus,height:r,onStateChange:e.onStateChange,is_trading_button_enabled:!1,is_description_enabled:!1}))),c.createElement(l.a,{has_cancel:!0,cancel_label:Object(v.localize)("Previous"),is_disabled:!["pending","verified"].includes(e.state.poi_state),label:Object(v.localize)("Next"),onCancel:e.props.onCancel,form_error:e.props.form_error})))}))}))}}])&&ht(t.prototype,n),r&&ht(t,r),i}(c.PureComponent);Et.propTypes={form_error:o.a.string,index:o.a.number,onCancel:o.a.func,onSave:o.a.func,onSubmit:o.a.func,refreshNotifications:o.a.func,addNotificationByKey:o.a.func,removeNotificationMessage:o.a.func,value:o.a.object};var Ot=Et;function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(){return(zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Nt(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){Nt(o,a,r,c,i,"next",e)}function i(e){Nt(o,a,r,c,i,"throw",e)}c(void 0)}))}}function Mt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Tt(e);if(t){var r=Tt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ct(this,n)}}function Ct(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dt=0,Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(o,e);var t,n,a,r=At(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={},t.clearError=function(){t.setState({form_error:""})},t.nextStep=function(e){t.clearError(),t.has_more_steps?t.goNext():t.finishWizard(e)},t.finishWizard=function(e){e(!1),t.props.openPendingDialog(),t.props.toggleModal()},t.prevStep=function(){t.setState({step:t.state.step-1,form_error:""})},t.updateValue=function(){var e=Pt(regeneratorRuntime.mark((function e(n,a,r){var o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(c.length>3&&void 0!==c[3])||c[3])||Dt!==n){e.next=10;break}return e.next=4,ie.a.setSettings(a);case 4:if(!(o=e.sent).error){e.next=9;break}return t.setState({form_error:o.error.message}),r(!1),e.abrupt("return");case 9:t.initiatePersonalDetails(r);case 10:t.saveFormData(n,a),t.nextStep(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),t.initiatePersonalDetails=function(){var e=Pt(regeneratorRuntime.mark((function e(n){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.a.authorized.storage.getSettings();case 2:if(!(a=e.sent).error){e.next=7;break}return t.setState({form_error:a.error.message}),"function"==typeof n&&n(!1),e.abrupt("return");case 7:r=Object.assign([],t.state.items),a.get_settings.citizen&&(r[Dt].form_value.citizen=t.transform(a.get_settings.citizen)),a.get_settings.tax_residence&&(r[Dt].form_value.tax_residence=t.transform(a.get_settings.tax_residence)),a.get_settings.tax_identification_number&&(r[Dt].form_value.tax_identification_number=a.get_settings.tax_identification_number),a.get_settings.account_opening_reason&&(r[Dt].form_value.account_opening_reason=a.get_settings.account_opening_reason),t.setState({items:r},t.props.refreshNotifications);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.transform=function(e){var n=St(t.props.residence_list.filter((function(t){return t.value===e})),1)[0];return Object(oe.getPropertyValue)(n,["text"])||e},t.goNext=function(){t.setState({step:t.state.step+1})},t.getCurrent=function(e){return e?t.state.items[t.state_index][e]:t.state.items[t.state_index]},t.saveFormData=function(e,n){var a=Object.assign([],t.state.items);a[e].form_value=n,t.state_index===Dt&&(a[Dt].form_value.citizen=t.transform(n.citizen),a[Dt].form_value.tax_residence=t.transform(n.tax_residence)),t.setState({items:a})},t.state={finished:void 0,step:0,form_error:"",is_loading:!1,items:[{header:{active_title:Object(v.localize)("Complete your personal details"),title:Object(v.localize)("Personal details")},body:He,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","is_loading"]},{header:{active_title:Object(v.localize)("Complete your personal details"),title:Object(v.localize)("Proof of identity")},body:Ot,form_value:{poi_state:"unknown"},props:["addNotificationByKey","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:Object(v.localize)("Complete your personal details"),title:Object(v.localize)("Proof of address")},body:mt,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.state_index===Dt&&(this.setState({is_loading:!0}),this.initiatePersonalDetails().then((function(){e.setState({is_loading:!1})})))}},{key:"render",value:function(){var e=this,t=this.getCurrent("body"),n=this.getCurrent("form_value"),a=(this.getCurrent("props")||[]).reduce((function(t,n){return Object.assign(t,(a={},r=n,o=e.props[n],r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a));var a,r,o}),{is_loading:this.state.is_loading}),r=this.getCurrent("height")||"auto";return c.createElement(re.a,{className:"mt5-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:Object(ce.isDesktop)(),height_offset:"40px"},c.createElement("div",{className:"mt5-financial-stp-modal__heading"},this.getCurrent()&&c.createElement(c.Fragment,null,c.createElement(W.a,null,c.createElement(ne.a,{steps:this.state.items,current_step:this.state.step})),c.createElement(K.a,null,c.createElement("div",{className:"mt5-financial-stp-modal__header-steps"},c.createElement("h4",{className:"mt5-financial-stp-modal__header-steps-title"},c.createElement(v.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:this.state.step+1,steps:this.state.items.length,step_title:this.state.items[this.state.step].header.title}})),this.state.items[this.state.step].header.active_title&&c.createElement("h4",{className:"mt5-financial-stp-modal__header-steps-subtitle"},this.state.items[this.state.step].header.active_title))))),c.createElement("div",{className:"mt5-financial-stp-modal__body"},c.createElement(t,zt({value:n,index:this.state_index,onSubmit:this.updateValue,height:r,is_loading:this.state.is_loading,onCancel:this.prevStep,onSave:this.saveFormData},a))))}},{key:"state_index",get:function(){return this.state.step}},{key:"has_more_steps",get:function(){return this.state.step+1<this.state.items.length}}])&&Mt(t.prototype,n),a&&Mt(t,a),o}(c.Component);Rt.propTypes={openPendingDialog:o.a.func,toggleModal:o.a.func};var It=Object(x.b)((function(e){var t=e.client,n=e.modules.mt5,a=e.ui;return{addNotificationByKey:a.addNotificationMessageByKey,get_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,openPendingDialog:n.openPendingDialog,refreshNotifications:t.refreshNotifications,removeNotificationMessage:a.removeNotificationMessage,removeNotificationByKey:a.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:n.storeProofOfAddress}}))(Rt);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Wt(e);if(t){var r=Wt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Bt(this,n)}}function Bt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(o,e);var t,n,a,r=qt(o);function o(){return Lt(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.disableApp,n=e.enableApp,a=e.is_mt5_financial_stp_modal_open,r=e.disableMt5FinancialStpModal;return c.createElement(c.Fragment,null,c.createElement(W.a,null,c.createElement(p.a,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:Object(v.localize)("Create a DMT5 real Financial STP account"),enableApp:n,is_open:a,has_close_icon:!0,height:"740px",toggleModal:r},c.createElement(It,{toggleModal:r}))),c.createElement(K.a,null,c.createElement(ee.a,{portal_element_id:"modal_root",title:Object(v.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:a,onClose:r},c.createElement(It,{toggleModal:r}))))}}])&&Ut(t.prototype,n),a&&Ut(t,a),o}(c.Component),Kt=Object(x.b)((function(e){var t=e.ui,n=e.modules;return{disableApp:t.disableApp,enableApp:t.enableApp,disableMt5FinancialStpModal:n.mt5.disableMt5FinancialStpModal,is_mt5_financial_stp_modal_open:n.mt5.is_mt5_financial_stp_modal_open}}))(Yt),$t=n("@deriv/components/lib/popover"),Ht=n.n($t),Xt=(n("@deriv/components/lib/popover.css"),n("@deriv/components/lib/table")),Gt=n.n(Xt),Zt=(n("@deriv/components/lib/table.css"),n("@deriv/components/lib/u-i-loader")),Jt=n.n(Zt);function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var tn=function(e){var t=e.is_visible,n=e.toggleModal,a=e.message;return c.createElement(p.a,{is_open:t,small:!0,toggleModal:n},c.createElement(p.a.Body,null,a),c.createElement(p.a.Footer,null,c.createElement(j.a,{has_effect:!0,text:Object(v.localize)("OK"),onClick:n,primary:!0})))},nn=function(e){var t=e.name,n=e.tooltip,a=e.counter,r=Qt(c.useState(!1),2),o=r[0],i=r[1],s=function(){return i(!o)};return n?c.createElement(c.Fragment,null,c.createElement("p",{className:"mt5-attribute-describer",onClick:s},t,c.createElement(K.a,null,c.createElement("span",{className:"counter"},a))),c.createElement(W.a,null,c.createElement(Ht.a,{alignment:"right",icon:"counter",counter:a,message:n,zIndex:9999})),c.createElement(K.a,null,c.createElement(tn,{toggleModal:s,is_visible:o,message:n}))):c.createElement("p",{className:"mt5-attribute-describer"},t)},an=[{attribute:c.createElement(nn,{name:Object(v.localize)("Account currency")}),synthetic:Object(v.localize)("USD"),financial:Object(v.localize)("USD"),financial_stp:Object(v.localize)("USD")},{attribute:c.createElement(nn,{name:Object(v.localize)("Maximum leverage"),counter:1,tooltip:Object(v.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}),synthetic:Object(v.localize)("Up to 1:1000"),financial:Object(v.localize)("Up to 1:1000"),financial_stp:Object(v.localize)("Up to 1:100")},{attribute:c.createElement(nn,{name:Object(v.localize)("Order execution"),counter:2,tooltip:Object(v.localize)("All 3 account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.")}),synthetic:Object(v.localize)("Market"),financial:Object(v.localize)("Market"),financial_stp:Object(v.localize)("Market")},{attribute:c.createElement(nn,{name:Object(v.localize)("Spread"),counter:3,tooltip:Object(v.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}),synthetic:Object(v.localize)("Fixed/Variable"),financial:Object(v.localize)("Variable"),financial_stp:Object(v.localize)("Variable")},{attribute:c.createElement(nn,{name:Object(v.localize)("Commission"),counter:4,tooltip:Object(v.localize)("Deriv charges no commission across all account types, except cryptocurrency accounts.")}),synthetic:Object(v.localize)("No"),financial:Object(v.localize)("No"),financial_stp:Object(v.localize)("No")},{attribute:c.createElement(nn,{name:Object(v.localize)("Minimum deposit")}),synthetic:Object(v.localize)("No"),financial:Object(v.localize)("No"),financial_stp:Object(v.localize)("No")},{attribute:c.createElement(nn,{name:Object(v.localize)("Margin call"),counter:5,tooltip:Object(v.localize)("When the remaining funds in your account is deemed insufficient to cover the leverage or margin requirements, your account will be placed under margin call. To prevent a margin call escalating to a stop out level, you can deposit  additional funds into your account or close any open positions.")}),synthetic:Object(v.localize)("100%"),financial:Object(v.localize)("150%"),financial_stp:Object(v.localize)("150%")},{attribute:c.createElement(nn,{name:Object(v.localize)("Stop out level"),counter:6,tooltip:Object(v.localize)("If your account reaches the stop out level, then your account will be in stop out state. Trading positions and orders on your account are forcibly closed until there are no more open positions or until your margin level increases above the stop out level.")}),synthetic:Object(v.localize)("50%"),financial:Object(v.localize)("75%"),financial_stp:Object(v.localize)("75%")},{attribute:c.createElement(nn,{name:Object(v.localize)("Number of assets")}),synthetic:Object(v.localize)("10+"),financial:Object(v.localize)("50+"),financial_stp:Object(v.localize)("50+")},{attribute:c.createElement(nn,{name:Object(v.localize)("Cryptocurrency trading"),counter:7,tooltip:Object(v.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}),synthetic:Object(v.localize)("N/A"),financial:Object(v.localize)("24/7"),financial_stp:Object(v.localize)("N/A")},{attribute:c.createElement(nn,{name:Object(v.localize)("Trading instruments")}),synthetic:Object(v.localize)("Synthetics"),financial:Object(v.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_stp:Object(v.localize)("FX-majors, FX-minors, FX-exotics")}],rn=function(){return c.createElement("div",{className:"mt5-compare-account--hint"},c.createElement("div",{className:"mt5-compare-accounts__bullet-wrapper"},c.createElement("span",{className:"mt5-compare-accounts__bullet mt5-compare-accounts__bullet--circle"}),c.createElement(v.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),c.createElement("div",{className:"mt5-compare-accounts__bullet-wrapper"},c.createElement("span",{className:"mt5-compare-accounts__bullet mt5-compare-accounts__bullet--star mt5-compare-accounts__star"},"*"),c.createElement(v.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your MT5 account to support your positions at all times."})))},on=function(){return c.createElement("div",{className:"mt5-compare-accounts"},c.createElement(Gt.a,{fixed:!0,scroll_height:Object(ce.isMobile)()?"100%":"calc(100% - 130px)"},c.createElement(Gt.a.Header,null,c.createElement(Gt.a.Row,{className:"mt5-compare-accounts__table-row"},c.createElement(Gt.a.Head,{fixed:!0}),c.createElement(Gt.a.Head,null,Object(v.localize)("Synthetic")),c.createElement(Gt.a.Head,null,Object(v.localize)("Financial"),c.createElement("span",{className:"mt5-compare-accounts__star"},"*")),c.createElement(Gt.a.Head,null,Object(v.localize)("Financial STP"),c.createElement("span",{className:"mt5-compare-accounts__star"},"*")))),c.createElement(Gt.a.Body,null,an.map((function(e,t){return c.createElement(Gt.a.Row,{key:t,className:"mt5-compare-accounts__table-row"},Object.keys(e).map((function(t,n){return c.createElement(Gt.a.Cell,{key:n,fixed:0===n},e[t])})))})))),c.createElement(W.a,null,c.createElement(rn,null)))},cn=Object(x.b)((function(e){var t=e.modules,n=e.ui;return{disableApp:n.disableApp,enableApp:n.enableApp,is_compare_accounts_visible:t.mt5.is_compare_accounts_visible,toggleCompareAccounts:t.mt5.toggleCompareAccountsModal}}))((function(e){var t=e.disableApp,n=e.enableApp,a=e.is_compare_accounts_visible,r=e.toggleCompareAccounts;return c.createElement("div",{className:"mt5-compare-accounts-modal__wrapper"},c.createElement(j.a,{className:"mt5-dashboard__welcome-message--button",has_effect:!0,text:Object(v.localize)("Compare accounts"),onClick:r,secondary:!0}),c.createElement(c.Suspense,{fallback:c.createElement(Jt.a,null)},c.createElement(W.a,null,c.createElement(p.a,{className:"mt5-dashboard__compare-accounts",disableApp:t,enableApp:n,is_open:a,title:Object(v.localize)("Compare accounts"),toggleModal:r,type:"button",height:"696px",width:"903px"},c.createElement(on,null))),c.createElement(K.a,null,c.createElement(ee.a,{portal_element_id:"deriv_app",title:Object(v.localize)("Compare accounts"),wrapper_classname:"mt5-dashboard__compare-accounts",visible:a,onClose:r,footer:c.createElement(rn,null)},c.createElement(on,null)))))})),sn=n("@deriv/shared/utils/os"),ln=function(e){return e?"Deriv-Demo":"Deriv-Server"},un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||Object(sn.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return mn({category:"real"})}},mn=function(e){var t=e.category,n=e.loginid,a="demo"===t?"Deriv-Demo":"Deriv-Server",r=null!=n?n:"";return"https://trade.mql5.com/trade?servers=".concat(a,"&trade_server=").concat(a).concat(r&&"&login=".concat(r))},dn=function(){return c.createElement("div",{className:"mt5-dashboard__download-center"},c.createElement("h1",{className:"mt5-dashboard__download-center--heading"},c.createElement(v.Localize,{i18n_default_text:"Run MT5 from your browser or download the MT5 app for your devices"})),c.createElement("div",{className:"mt5-dashboard__download-center-options"},c.createElement("div",{className:"mt5-dashboard__download-center-options--desktop"},c.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-devices"},c.createElement(m.a,{icon:"IcMt5DeviceDesktop",width:118,height:85}),c.createElement(m.a,{icon:"IcMt5DeviceLaptop",width:75,height:51}),c.createElement("a",{href:mn({category:"demo"}),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationWebDemo",width:138,height:40}))),c.createElement("div",{className:"mt5-dashboard__download-center-options--desktop-links"},c.createElement("a",{className:"mt5-dashboard__download-center-options--desktop-link",href:un("windows"),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationWindows",width:138,height:40})),c.createElement("a",{className:"mt5-dashboard__download-center-options--desktop-link",href:un("linux"),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationLinux",width:138,height:40})),c.createElement("a",{className:"mt5-dashboard__download-center-options--desktop-link--top",href:mn({category:"real"}),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationWebReal",width:138,height:40}))),c.createElement("p",{className:"mt5-dashboard__download-center--hint"},c.createElement(v.Localize,{i18n_default_text:"The MT5 desktop app is not supported by macOS, Windows XP, Windows 2003, and Windows Vista."}))),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile"},c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-devices"},c.createElement(m.a,{icon:"IcMt5DeviceTablet",width:133,height:106}),c.createElement(m.a,{icon:"IcMt5DevicePhone",width:48,height:74})),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-links"},c.createElement("a",{className:"mt5-dashboard__download-center-options--mobile-link",href:un("android"),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationGoogle",width:135,height:40})),c.createElement("a",{className:"mt5-dashboard__download-center-options--mobile-link",href:un("ios"),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationApple",width:120,height:40}))))))},pn=n("@deriv/components/lib/multi-step"),fn=n.n(pn),_n=(n("@deriv/components/lib/multi-step.css"),n("@deriv/components/lib/page-overlay")),bn=n.n(_n),hn=(n("@deriv/components/lib/page-overlay.css"),n("./Stores/Modules/MT5/mt5-store.js"));function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Pn(e);if(t){var r=Pn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Nn(this,n)}}function Nn(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var An=function(e){var t=e.count_from,n=void 0===t?60:t,a=e.onTimeout,r=Mn(c.useState(n),2),o=r[0],i=r[1];return c.useEffect((function(){if(0!==o){var e=setTimeout((function(){i(o-1)}),1e3);return function(){return clearTimeout(e)}}return a(),function(){}}),[o]),c.createElement("span",{className:"countdown"},o)},Cn=function(e){var t=e.sendVerifyEmail,n=e.password_type,a=e.account_type,r=e.account_group,o=Mn(c.useState(!1),2),i=o[0],s=o[1],l=Mn(c.useState(!1),2),u=l[0],d=l[1];c.useEffect((function(){localStorage.setItem("mt5_reset_password_intent",[r,a].join(".")),localStorage.setItem("mt5_reset_password_type",n),t()}),[]);return c.createElement("div",{className:"mt5-verification-email-sent"},c.createElement(m.a,{icon:"IcEmailSent",size:128}),c.createElement("h2",{className:"mt5-verification-email-sent__title"},c.createElement(v.Localize,{i18n_default_text:"We've sent you an email"})),c.createElement("p",{className:"mt5-verification-email-sent__description"},c.createElement(v.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!i&&c.createElement(j.a,{className:"mt5-verification-email-sent__resend-button",primary:!0,onClick:function(){s(!0)}},c.createElement(v.Localize,{i18n_default_text:"Didn't receive the email?"})),i&&c.createElement(c.Fragment,null,c.createElement("p",{className:"mt5-verification-email-sent__title mt5-verification-email-sent__title--sub"},c.createElement(v.Localize,{i18n_default_text:"Didn't receive the email?"})),c.createElement("p",{className:"mt5-verification-email-sent__description"},c.createElement(v.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),c.createElement(j.a,{className:"mt5-verification-email-sent__resend-button",large:!0,primary:!0,disabled:u,onClick:function(){t(),d(!0)}},!u&&c.createElement(v.Localize,{i18n_default_text:"Resend email"}),u&&c.createElement(c.Fragment,null,c.createElement(v.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[c.createElement(An,{key:0,onTimeout:function(){return d(!1)},count_from:60})]})))))},Tn=function(e){var t=e.toggleModal,n=e.is_investor;return c.createElement("div",{className:"mt5-password-manager__success"},c.createElement(m.a,{icon:"IcPasswordUpdated",size:128}),c.createElement("h1",{className:"mt5-password-manager__success-header"},c.createElement(v.Localize,{i18n_default_text:"Password changed"})),c.createElement("p",{className:"mt5-password-manager__success-paragraph"},n?c.createElement(v.Localize,{i18n_default_text:"Your investor password has been changed."}):c.createElement(v.Localize,{i18n_default_text:"Your password has been changed."})),c.createElement(j.a,{onClick:t,className:"mt5-password-manager__success-btn",primary:!0,large:!0},c.createElement("p",{className:"dc-btn__text"},Object(v.localize)("OK"))))},Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(i,e);var t,n,r,o=xn(i);function i(){var e;jn(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).multi_step_ref=c.createRef(),e.state={active_tab_index:0,error_message_main:"",is_submit_success_main:!1,error_message_investor:"",is_submit_success_investor:!1},e.showError=function(t,n){e.setState(On({},"error_message_".concat(t),n))},e.hideError=function(t){var n;e.setState((On(n={},"error_message_".concat(t),""),On(n,"is_submit_success_".concat(t),!0),n))},e.updateAccountTabIndex=function(t){e.setState({active_tab_index:t,error_message_main:"",is_submit_success_main:!1,error_message_investor:"",is_submit_success_investor:!1})},e}return t=i,(n=[{key:"componentDidUpdate",value:function(e){!e.is_visible&&this.props.is_visible&&this.setState({active_tab_index:0,error_message_main:"",is_submit_success_main:!1,error_message_investor:"",is_submit_success_investor:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.enableApp,r=t.disableApp,o=t.is_visible,i=t.selected_login,s=t.selected_account,l=t.toggleModal,u=t.selected_account_type,m=t.selected_account_group,d=function(e){var t={};return Object(N.c)(e.new_password,{min:8,max:25})?Object(N.d)(e.new_password)||(t.new_password=Object(v.localize)("You need to include uppercase and lowercase letters, and numbers.")):t.new_password=Object(v.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=Object(v.localize)("This field is required")),t},f=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,hn.a.changePassword(wn({login:a},n));case 5:(r=t.sent)?e.showError(n.password_type,r):e.hideError(n.password_type);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(e){En(o,a,r,c,i,"next",e)}function i(e){En(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}(),b=function(){return e.state.is_submit_success_main?c.createElement(Tn,{toggleModal:l}):c.createElement(a.c,{initialValues:{old_password:"",new_password:"",password_type:"main"},validate:d,onSubmit:f},(function(t){var n=t.isSubmitting,r=t.errors,o=t.setFieldTouched,i=t.touched;return c.createElement(a.b,{className:"mt5-password-manager__main-form",noValidate:!0},e.state.error_message_main&&c.createElement("p",{className:"mt5-password-manager--error-message"},e.state.error_message_main),c.createElement(a.a,{name:"old_password"},(function(e){var t=e.field;return c.createElement(_.a,gn({},t,{label:Object(v.localize)("Current password"),error:i.old_password&&r.old_password,required:!0}))})),c.createElement(a.a,{name:"new_password"},(function(e){var t=e.field;return c.createElement(h.a,{input:t.value,has_error:!(!i.new_password||!r.new_password)},(function(e){var n=e.has_warning;return c.createElement(_.a,gn({},t,{autoComplete:"password",label:Object(v.localize)("New password"),hint:!n&&Object(v.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:i.new_password&&r.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"mt5-password-manager__new-password",required:!0}))}))})),c.createElement("div",{className:"mt5-password-manager__actions"},c.createElement(j.a,{className:"mt5-password-manager--button",is_disabled:n,is_loading:n,text:Object(v.localize)("Change password"),primary:!0,large:!0}),c.createElement(j.a,{className:"mt5-password-manager--button",type:"button",onClick:function(){e.setState({password_type:"main"},(function(){var t;return null===(t=e.multi_step_ref.current)||void 0===t?void 0:t.nextStep()}))},text:Object(v.localize)("Reset main password"),tertiary:!0,large:!0})))}))},y=function(){return e.state.is_submit_success_investor?c.createElement(Tn,{toggleModal:l,is_investor:!0}):c.createElement("div",{className:"mt5-password-manager__investor-wrapper"},c.createElement("p",{className:"mt5-password-manager--paragraph"},c.createElement(v.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),c.createElement("p",{className:"mt5-password-manager--paragraph"},c.createElement(v.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),e.state.error_message_investor&&c.createElement("p",{className:"mt5-password-manager--error-message"},e.state.error_message_investor),c.createElement(a.c,{initialValues:{old_password:"",new_password:"",password_type:"investor"},validate:d,onSubmit:f},(function(t){var n=t.isSubmitting,r=t.errors,o=t.setFieldTouched,i=t.touched;return c.createElement(a.b,{className:"mt5-password-manager__investor-form",noValidate:!0},c.createElement(a.a,{name:"old_password"},(function(e){var t=e.field;return c.createElement(_.a,gn({},t,{label:Object(v.localize)("Current investor password"),error:i.old_password&&r.old_password,required:!0}))})),c.createElement(a.a,{name:"new_password"},(function(e){var t=e.field;return c.createElement(h.a,{input:t.value,has_error:!(!i.new_password||!r.new_password)},(function(e){var n=e.has_warning;return c.createElement(_.a,gn({},t,{autoComplete:"password",label:Object(v.localize)("New investor password"),hint:!n&&Object(v.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:i.new_password&&r.new_password,onChange:function(e){o("new_password",!0,!0),t.onChange(e)},className:"mt5-password-manager__new-password",required:!0}))}))})),c.createElement("div",{className:"mt5-password-manager__actions"},c.createElement(j.a,{className:"mt5-password-manager--button",is_disabled:n,is_loading:n,text:Object(v.localize)("Change investor password"),primary:!0,large:!0}),c.createElement(j.a,{className:"mt5-password-manager--button",type:"button",onClick:function(){e.setState({password_type:"investor"},(function(){var t;return null===(t=e.multi_step_ref.current)||void 0===t?void 0:t.nextStep()}))},text:Object(v.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))},g=function(){return c.createElement(c.Fragment,null,c.createElement(H.a,{active_index:e.state.active_tab_index,onTabItemClick:e.updateAccountTabIndex,top:!0},c.createElement("div",{label:Object(v.localize)("Main password")},c.createElement(W.a,null,c.createElement(me.a,{height:"calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)"},c.createElement(b,null))),c.createElement(K.a,null,c.createElement(me.a,{height:"calc(100vh - 120px)"},c.createElement(b,null)))),c.createElement("div",{label:Object(v.localize)("Investor password")},c.createElement(W.a,null,c.createElement(me.a,{height:"calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)"},c.createElement(y,null))),c.createElement(K.a,null,c.createElement(me.a,{height:"calc(100vh - 120px)"},c.createElement(y,null))))))},w=[{component:c.createElement(g,null)},{component:c.createElement(Cn,{sendVerifyEmail:this.props.sendVerifyEmail,password_type:this.state.password_type,account_type:u,account_group:m})}],E=function(){return c.createElement(fn.a,{ref:e.multi_step_ref,steps:w,className:"mt5-password-manager",lbl_previous:Object(v.localize)("Back")})};return c.createElement(c.Suspense,{fallback:c.createElement(Jt.a,null)},c.createElement(W.a,null,c.createElement(p.a,{className:"mt5-password-manager__modal",disableApp:r,enableApp:n,is_open:o,title:"real"===u?Object(v.localize)("Manage DMT5 Real {{account_title}} account password",{account_title:s}):Object(v.localize)("Manage DMT5 Demo {{account_title}} account password",{account_title:s}),toggleModal:l,height:"688px",width:"904px"},c.createElement(E,null))),c.createElement(K.a,null,c.createElement(bn.a,{is_open:o,portal_id:"deriv_app",header:Object(v.localize)("Manage password"),onClickClose:l},c.createElement(E,null))))}}])&&zn(t.prototype,n),r&&zn(t,r),i}(c.Component);Dn.propTypes={is_visible:o.a.bool,selected_account:o.a.string,selected_login:o.a.string,toggleModal:o.a.func};var Rn=Object(x.b)((function(e){var t=e.modules.mt5,n=e.ui;return{enableApp:n.enableApp,disableApp:n.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(Dn),In=n("@deriv/components/lib/money"),Fn=n.n(In);n("@deriv/components/lib/money.css");function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Yn(e);if(t){var r=Yn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Wn(this,n)}}function Wn(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(o,e);var t,n,a,r=Bn(o);function o(){var e;Un(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).accountTitle=function(){return e.props.mt5_companies&&e.props.current_account?e.props.mt5_companies[e.props.current_account.category][e.props.current_account.type].title:""},e.closeSuccess=function(){e.props.closeSuccessTopUpModal()},e}return t=o,(n=[{key:"render",value:function(){if(!this.props.mt5_companies||!this.props.current_account)return null;var e=this.accountTitle();return c.createElement(c.Fragment,null,c.createElement(p.a,{toggleModal:this.props.closeTopUpModal,is_open:this.props.is_top_up_virtual_open,className:"top-up-virtual",title:Object(v.localize)("Fund top up"),width:"384px"},c.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},c.createElement("p",{className:"dc-modal__container_top-up-virtual__description"},c.createElement(v.Localize,{i18n_default_text:"You can top up your demo account with an additional $10,000.00 if your balance is $1,000.00 or less."})),c.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},c.createElement(v.Localize,{i18n_default_text:"DMT5 {{ account_title }} account",values:{account_title:e}})),c.createElement("div",null,c.createElement("p",{className:"dc-modal__container_top-up-virtual--balance-descriptor"},c.createElement(v.Localize,{i18n_default_text:"Current balance"})),c.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},c.createElement(Fn.a,{amount:this.props.current_account.display_balance,currency:this.props.current_account.currency}))),c.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},c.createElement(j.a,{is_disabled:this.props.current_account.balance>1e3,type:"button",onClick:this.props.topUpVirtual,primary:!0,large:!0},c.createElement(v.Localize,{i18n_default_text:"Top up $10,000.00"}))))),c.createElement(S,{is_open:this.props.is_top_up_virtual_success,toggleModal:this.closeSuccess,has_close_icon:!0,title:Object(v.localize)("Fund top up"),icon:c.createElement(m.a,{icon:"IcCashierWallet",size:128}),heading:c.createElement("h3",{className:"mt5-success-topup__heading"},c.createElement(v.Localize,{i18n_default_text:"$10,000.00 has been credited into your DMT5 {{title}} account.",values:{title:e}})),message:c.createElement("div",{className:"mt5-success-topup__description"},c.createElement("p",null,c.createElement(v.Localize,{i18n_default_text:"New current balance"})),c.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},c.createElement(Fn.a,{amount:this.props.current_account.balance,currency:this.props.current_account.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))}}])&&Vn(t.prototype,n),a&&Vn(t,a),o}(c.Component);Kn.propTypes={account_title:o.a.string,closeSuccessTopUpModal:o.a.func,closeTopUpVirtual:o.a.func,currency:o.a.string,display_balance:o.a.string,is_top_up_virtual_open:o.a.bool,is_top_up_virtual_success:o.a.bool,topUpVirtual:o.a.func};var $n=Object(x.b)((function(e){var t=e.ui,n=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:n.mt5.current_account,mt5_companies:n.mt5.mt5_companies,topUpVirtual:n.mt5.topUpVirtual}}))(Kn),Hn=n("react-router-dom"),Xn=n("./Stores/Modules/MT5/Helpers/mt5-config.js");function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=na(e);if(t){var r=na(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ta(this,n)}}function ta(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function na(e){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ia(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var sa=function(e){var t,n,a,r,o=e.current_list,c=e.children,i=ia(e,["current_list","children"]),s=localStorage.getItem("mt5_reset_password_intent"),l=localStorage.getItem("mt5_reset_password_type")||"main";if(s&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(s)&&o){var u=oa(s.split("."),2);t=u[0],n=u[1],a=o["".concat(t,".").concat(n)].login,r=Object(Xn.c)()[t][n].title}else if(o){var m=oa(Object.keys(o).pop().split("."),2);t=m[0],n=m[1],a=o["".concat(t,".").concat(n)].login,r=Object(Xn.c)()[t][n].title}else a="",r="";return c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){ra(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({login:a,title:r,type:l},i))},la=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(i,e);var t,n,r,o=ea(i);function i(){var e;Zn(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).state={has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""},e.renderErrorBox=function(t){e.setState({has_error:!0,error_message:t.message})},e.clearAddressBar=function(){localStorage.removeItem("mt5_reset_password_intent"),localStorage.removeItem("mt5_reset_password_type"),e.props.history.push("".concat(g.a.mt5))},e.resetPassword=function(t,n,a,r){var o=r.setSubmitting,c=new URLSearchParams(window.location.search);o(!0);var i={login:a,password_type:n,new_password:t.new_password,verification_code:c.get("code")};ie.a.mt5PasswordReset(i).then((function(t){t.error&&"InvalidToken"===t.error.code?e.renderErrorBox(t.error):(e.setState({is_finished:!0,changed_password_type:n}),e.clearAddressBar()),o(!1)}))},e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.is_mt5_reset_password_modal_enabled,r=t.setMt5PasswordResetModal,o=t.current_list;return c.createElement(p.a,{className:"mt5-reset-password-modal",is_open:n,toggleModal:function(){return r(!1)},title:Object(v.localize)("Reset DMT5 password")},!this.is_list_fetched&&!this.state.has_error&&c.createElement(_e.a,{is_fullscreen:!1}),this.is_list_fetched&&!this.state.has_error&&!this.state.is_finished&&c.createElement(sa,{current_list:o},(function(t){var n=t.title,r=t.type,o=t.login;return c.createElement(a.c,{initialValues:{new_password:""},validate:function(e){return!!e.new_password},onSubmit:function(t,n){return e.resetPassword(t,r,o,n)}},(function(e){var t=e.handleSubmit,a=e.errors,o=e.values,i=e.isSubmitting,s=e.handleChange,u=e.handleBlur,m=e.touched;return c.createElement("form",{autoComplete:"off",onSubmit:t},c.createElement("div",{className:"mt5-reset-password"},c.createElement("div",{className:"mt5-reset-password__container"},c.createElement("h2",{className:"mt5-reset-password__heading"},c.createElement(v.Localize,{i18n_default_text:"Reset DMT5 {{title}} password",values:{title:n}})),c.createElement("div",{className:"mt5-reset-password__password-area"},c.createElement(h.a,{input:o.new_password,error:m.new_password&&a.new_password},c.createElement(_.a,{className:"mt5-reset-password__password-field",name:"new_password",label:Object(v.localize)("New {{type}} password",{type:r}),onChange:s,onBlur:u,error:m.new_password&&a.new_password,value:o.new_password,"data-lpignore":"true",required:!0})),!o.new_password&&c.createElement("p",{className:"mt5-reset-password__hint"},c.createElement(v.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."}))),i&&c.createElement(_e.a,{is_fullscreen:!1}),!i&&c.createElement(l.a,{is_disabled:i||!o.new_password,errors:a,is_center:!0,large:!0,label:Object(v.localize)("Create {{type}} password",{type:r})}))))}))})),this.state.has_error&&c.createElement("div",{className:"mt5-reset-password__error"},c.createElement(m.a,{icon:"IcMt5Expired",size:128}),c.createElement("p",{className:"mt5-reset-password__heading"},this.state.error_message),c.createElement("p",{className:"mt5-reset-password__description mt5-reset-password__description--is-centered"},c.createElement(v.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),c.createElement(j.a,{primary:!0,large:!0,onClick:function(){e.clearAddressBar(),r(!1)}},c.createElement(v.Localize,{i18n_default_text:"Ok"}))),this.state.is_finished&&c.createElement("div",{className:"mt5-reset-password__success"},c.createElement(m.a,{icon:"IcMt5PasswordUpdated",size:128}),c.createElement("div",{className:"mt5-reset-password__heading"},c.createElement(v.Localize,{i18n_default_text:"Password saved"})),c.createElement("div",{className:"mt5-reset-password__description"},c.createElement(v.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===this.state.changed_password_type?Object(v.localize)("main"):Object(v.localize)("investor")}})),c.createElement(j.a,{primary:!0,large:!0,onClick:function(){return r(!1)}},c.createElement(v.Localize,{i18n_default_text:"Ok"}))))}},{key:"is_list_fetched",get:function(){return 0!==Object.keys(this.props.current_list).length}}])&&Jn(t.prototype,n),r&&Jn(t,r),i}(c.Component);la.propTypes={is_mt5_reset_password_modal_enabled:r.any,setMt5PasswordResetModal:r.any,current_list:r.any};var ua=Object(Hn.withRouter)(Object(x.b)((function(e){var t=e.modules.mt5;return{is_mt5_reset_password_modal_enabled:t.is_mt5_reset_password_modal_enabled,setMt5PasswordResetModal:t.setMt5PasswordResetModal,current_list:t.current_list}}))(la)),ma=Object(x.b)((function(e){var t=e.ui,n=e.modules.mt5;return{enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:n.closeMT5PendingDialog,is_mt5_pending_dialog_open:n.is_mt5_pending_dialog_open}}))((function(e){var t=e.enableApp,n=e.disableApp,a=e.toggleModal,r=e.is_mt5_pending_dialog_open;return c.createElement(p.a,{title:Object(v.localize)("Thanks for submitting your documents!"),className:"mt5-pending-dialog",is_open:r,disableApp:n,enableApp:t,toggleModal:a,has_close_icon:!1,small:!0},c.createElement(p.a.Body,null,c.createElement(v.Localize,{i18n_default_text:"Weâ€™ll process your documents within 1-3 days. Once they are verified, weâ€™ll notify you via email."})),c.createElement(p.a.Footer,null,c.createElement(j.a,{has_effect:!0,text:Object(v.localize)("OK"),onClick:a,primary:!0})))})),da=n("@deriv/components/lib/clipboard"),pa=n.n(da),fa=(n("@deriv/components/lib/clipboard.css"),function(e){var t=e.display_name,n=e.label,a=e.success_msg,r=e.info_msg,o=e.text_copy;return c.createElement("div",{className:"mt5-dashboard__info-copy"},c.createElement("div",{className:"mt5-dashboard__info-display"},c.createElement("span",{className:"mt5-dashboard__info-label"},n,":"),t),c.createElement(pa.a,{text_copy:o,info_message:r,success_message:a}))});function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ha(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ya(e,t){return(ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=wa(e);if(t){var r=wa(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return va(this,n)}}function va(e,t){return!t||"object"!==_a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ya(e,t)}(o,e);var t,n,a,r=ga(o);function o(){return ba(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return c.createElement(pa.a,{text_copy:this.props.text,info_message:Object(v.localize)("Click here to copy account login number and paste into the login box in MT5 platform along with your password."),success_message:Object(v.localize)("Account login number copied!"),className:"mt5-account-card__clipboard"})}}])&&ha(t.prototype,n),a&&ha(t,a),o}(c.PureComponent),Oa=function(e){var t=e.button_label,n=e.commission_message,a=e.descriptor,r=e.existing_data,o=e.has_mt5_account,i=e.icon,s=e.is_button_primary,l=e.is_disabled,u=e.specs,m=e.title,d=e.type,p=e.onSelectAccount,f=e.onClickFund,_=e.onPasswordManager,b=i||function(){return null},h="real"===d.category?c.createElement(v.Localize,{i18n_default_text:"Add real account"}):c.createElement(v.Localize,{i18n_default_text:"Add demo account"}),y=t||h,g="synthetic"===d.type&&"real"===d.category,w="demo"===d.category;return c.createElement("div",{className:"mt5-account-card"},g&&c.createElement("div",{className:"mt5-account-card__banner"},c.createElement(v.Localize,{i18n_default_text:"Most popular"})),w&&c.createElement("div",{className:"mt5-account-card__banner mt5-account-card__banner--demo"},c.createElement(v.Localize,{i18n_default_text:"DEMO"})),c.createElement("div",{className:E()("mt5-account-card__type",{"mt5-account-card__type--has-banner":g||w}),id:"mt5_".concat(d.category,"_").concat(d.type)},i&&c.createElement(b,null),c.createElement("div",{className:"mt5-account-card__type--description"},c.createElement("h1",{className:"mt5-account-card--heading"},m),!r&&c.createElement("p",{className:"mt5-account-card--paragraph"},a),r&&r.display_balance&&c.createElement("p",{className:"mt5-account-card--balance"},c.createElement(Fn.a,{amount:r.display_balance,currency:r.currency})))),c.createElement("div",{className:"mt5-account-card__cta"},c.createElement("div",{className:"mt5-account-card__specs"},c.createElement("table",{className:"mt5-account-card__specs-table"},c.createElement("tbody",null,Object.keys(u).map((function(e,t){return c.createElement("tr",{key:t,className:"mt5-account-card__specs-table-row"},c.createElement("td",{className:"mt5-account-card__specs-table-attribute"},c.createElement("p",{className:"mt5-account-card--paragraph"},e)),c.createElement("td",{className:"mt5-account-card__specs-table-data"},c.createElement("p",{className:"mt5-account-card--paragraph"},u[e])))}))))),(null==r?void 0:r.login)&&c.createElement("div",{className:"mt5-account-card__login"},c.createElement(v.Localize,{i18n_default_text:"Account login no.Â <0>{{login}}</0>",values:{login:r.display_login},components:[c.createElement("strong",{key:"0"})]}),c.createElement(Ea,{text:r.display_login})),!r&&n&&c.createElement("p",{className:"mt5-account-card__commission mt5-account-card--paragraph"},n),r&&c.createElement("div",{className:"mt5-account-card__manage"},c.createElement(j.a,{onClick:f,type:"button",secondary:!0},"real"===d.category&&c.createElement(v.Localize,{i18n_default_text:"Fund transfer"}),"demo"===d.category&&c.createElement(v.Localize,{i18n_default_text:"Fund top up"})),c.createElement(j.a,{onClick:function(){_(r.login,m,d.category,d.type)},type:"button",secondary:!0},c.createElement(v.Localize,{i18n_default_text:"Password"}))),!r&&o&&c.createElement(j.a,{className:"mt5-account-card__account-selection",onClick:p,type:"button"},c.createElement(v.Localize,{i18n_default_text:"Select"})),r&&c.createElement("a",{className:"dc-btn mt5-account-card__account-selection mt5-account-card__account-selection--primary",type:"button",href:mn({category:d.category,loginid:r.display_login}),target:"_blank",rel:"noopener noreferrer"},c.createElement(v.Localize,{i18n_default_text:"Trade on web terminal"})),!r&&!o&&c.createElement(j.a,{className:"mt5-account-card__account-selection",onClick:p,type:"button",is_disabled:l,primary:s,secondary:!s,large:!0},y)))};function ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var za,Sa,xa,Na=function(e){var t,n,a,r=e.is_loading,o=e.onSelectAccount,i=e.openAccountTransfer,s=e.current_list,l=e.has_mt5_account,u=e.openPasswordManager;return r?c.createElement("div",{className:"mt5-demo-accounts-display"},c.createElement(X.a,null)):c.createElement("div",{className:"mt5-demo-accounts-display"},c.createElement(Oa,{has_mt5_account:l,icon:function(){return c.createElement(m.a,{icon:"IcMt5SyntheticPlatform",size:64})},title:Object(v.localize)("Synthetic"),type:{category:"demo",type:"synthetic"},existing_data:s["demo.synthetic"],commission_message:c.createElement(v.Localize,{i18n_default_text:"No commission"}),onSelectAccount:function(){return o({category:"demo",type:"synthetic"})},onPasswordManager:u,onClickFund:function(){return i(s["demo.synthetic"],{category:"demo",type:"synthetic"})},descriptor:Object(v.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:(t={},ja(t,Object(v.localize)("Leverage"),Object(v.localize)("Up to 1:1000")),ja(t,Object(v.localize)("Margin call"),Object(v.localize)("100%")),ja(t,Object(v.localize)("Stop out level"),Object(v.localize)("50%")),ja(t,Object(v.localize)("Number of assets"),Object(v.localize)("10+")),t)}),c.createElement(Oa,{has_mt5_account:l,icon:function(){return c.createElement(m.a,{icon:"IcMt5FinancialPlatform",size:64})},title:Object(v.localize)("Financial"),type:{category:"demo",type:"financial"},existing_data:s["demo.financial"],commission_message:c.createElement(v.Localize,{i18n_default_text:"No commission <0>(excluding cryptocurrencies)</0>",components:[c.createElement("span",{key:0,className:"mt5-dashboard--hint"})]}),onSelectAccount:function(){return o({category:"demo",type:"financial"})},onPasswordManager:u,onClickFund:function(){return i(s["demo.financial"],{category:"demo",type:"financial"})},descriptor:Object(v.localize)("Trade commodities, cryptocurrencies, major (standard and micro-lots) and minor currency pairs with high leverage."),specs:(n={},ja(n,Object(v.localize)("Leverage"),Object(v.localize)("Up to 1:1000")),ja(n,Object(v.localize)("Margin call"),Object(v.localize)("150%")),ja(n,Object(v.localize)("Stop out level"),Object(v.localize)("75%")),ja(n,Object(v.localize)("Number of assets"),Object(v.localize)("50+")),n)}),c.createElement(Oa,{has_mt5_account:l,icon:function(){return c.createElement(m.a,{icon:"IcMt5FinancialStpPlatform",size:64})},title:Object(v.localize)("Financial STP"),type:{category:"demo",type:"financial_stp"},existing_data:s["demo.financial_stp"],commission_message:c.createElement(v.Localize,{i18n_default_text:"No commission"}),onSelectAccount:function(){return o({category:"demo",type:"financial_stp"})},onPasswordManager:u,onClickFund:function(){return i(s["demo.financial_stp"],{category:"demo",type:"financial_stp"})},descriptor:Object(v.localize)("Trade major, minor, and exotic currency pairs with Straight-Through Processing (STP) of your orders direct to the market."),specs:(a={},ja(a,Object(v.localize)("Leverage"),Object(v.localize)("Up to 1:100")),ja(a,Object(v.localize)("Margin call"),Object(v.localize)("150%")),ja(a,Object(v.localize)("Stop out level"),Object(v.localize)("75%")),ja(a,Object(v.localize)("Number of assets"),Object(v.localize)("50+")),a)}))};function Pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ma=(Pa(za={},Object(v.localize)("Leverage"),Object(v.localize)("Up to 1:1000")),Pa(za,Object(v.localize)("Margin call"),Object(v.localize)("100%")),Pa(za,Object(v.localize)("Stop out level"),Object(v.localize)("50%")),Pa(za,Object(v.localize)("Number of assets"),Object(v.localize)("10+")),za),ka=(Pa(Sa={},Object(v.localize)("Leverage"),Object(v.localize)("Up to 1:1000")),Pa(Sa,Object(v.localize)("Margin call"),Object(v.localize)("150%")),Pa(Sa,Object(v.localize)("Stop out level"),Object(v.localize)("75%")),Pa(Sa,Object(v.localize)("Number of assets"),Object(v.localize)("50+")),Sa),Aa=(Pa(xa={},Object(v.localize)("Leverage"),Object(v.localize)("Up to 1:100")),Pa(xa,Object(v.localize)("Margin call"),Object(v.localize)("150%")),Pa(xa,Object(v.localize)("Stop out level"),Object(v.localize)("75%")),Pa(xa,Object(v.localize)("Number of assets"),Object(v.localize)("50+")),xa),Ca=function(e){var t=e.has_real_account,n=e.is_fully_authenticated,a=e.is_pending_authentication,r=e.onSelectAccount,o=e.openAccountTransfer,i=e.openPasswordModal,s=e.current_list,l=e.has_mt5_account,u=e.openPasswordManager,d=e.account_settings,p=d.citizen&&d.tax_identification_number&&d.tax_residence,f=function(e,t,n){return e&&n?c.createElement(v.Localize,{i18n_default_text:"Set your password"}):t?c.createElement(v.Localize,{i18n_default_text:"Pending verification"}):c.createElement(v.Localize,{i18n_default_text:"Add real account"})}(n,a,p),_=!t||a;return c.createElement("div",{className:"mt5-real-accounts-display"},c.createElement(Oa,{has_mt5_account:l,icon:function(){return c.createElement(m.a,{icon:"IcMt5SyntheticPlatform",size:64})},title:Object(v.localize)("Synthetic"),is_disabled:!t,type:{category:"real",type:"synthetic"},existing_data:s["real.synthetic"],commission_message:c.createElement(v.Localize,{i18n_default_text:"No commission"}),onSelectAccount:function(){return r({type:"synthetic",category:"real"})},onPasswordManager:u,onClickFund:function(){return o(s["real.synthetic"],{category:"real",type:"synthetic"})},descriptor:Object(v.localize)("Trade CFDs on our Synthetic Indices that simulate real-world market movement."),specs:Ma}),c.createElement(Oa,{has_mt5_account:l,is_disabled:!t,icon:function(){return c.createElement(m.a,{icon:"IcMt5FinancialPlatform",size:64})},title:Object(v.localize)("Financial"),type:{category:"real",type:"financial"},existing_data:s["real.financial"],commission_message:c.createElement(v.Localize,{i18n_default_text:"No commission <0>(excluding cryptocurrencies)</0>",components:[c.createElement("span",{key:0,className:"mt5-dashboard--hint"})]}),onSelectAccount:function(){return r({type:"financial",category:"real"})},onPasswordManager:u,onClickFund:function(){return o(s["real.financial"],{category:"real",type:"financial"})},descriptor:Object(v.localize)("Trade commodities, cryptocurrencies, major (standard and micro-lots) and minor currency pairs with high leverage."),specs:ka}),c.createElement(Oa,{has_mt5_account:l,icon:function(){return c.createElement(m.a,{icon:"IcMt5FinancialStpPlatform",size:64})},title:Object(v.localize)("Financial STP"),type:{category:"real",type:"financial_stp"},existing_data:s["real.financial_stp"],commission_message:c.createElement(v.Localize,{i18n_default_text:"No commission"}),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};n&&p?i(e):(n||_)&&p||r(e)},button_label:f,is_button_primary:a,onPasswordManager:u,onClickFund:function(){return o(s["real.financial_stp"],{category:"real",type:"financial_stp"})},descriptor:Object(v.localize)("Trade major, minor, and exotic currency pairs with Straight-Through Processing (STP) of your orders direct to the market."),specs:Aa,is_disabled:_}))};n("./sass/app/modules/mt5/mt5-dashboard.scss");function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ua(e);if(t){var r=Ua(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return La(this,n)}}function La(e,t){return!t||"object"!==Ta(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(o,e);var t,n,a,r=Fa(o);function o(){var e;Da(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state={active_index:0,password_manager:{is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:""}},e.openResetPassword=function(){/reset-password/.test(e.props.location.hash)&&e.props.setMt5PasswordResetModal(!0)},e.updateActiveIndex=function(t){1===t?e.setState({is_demo_tab:!0}):0===t&&e.setState({is_demo_tab:!1});var n=/demo/.test(e.props.location.hash)?1:0;e.state.active_index!==n&&e.setState({active_index:n})},e.openAccountTransfer=function(t,n){"real"===n.category?(e.props.disableMt5PasswordModal(),e.props.history.push(g.a.cashier_acc_transfer)):(e.props.setCurrentAccount(t,n),e.props.openTopUpModal())},e.togglePasswordManagerModal=function(t,n,a,r){e.setState((function(e){return{active_index:e.active_index,password_manager:{is_visible:!e.password_manager.is_visible,selected_login:"string"==typeof t?t:"",selected_account:"string"==typeof n?n:"",selected_account_group:a,selected_account_type:r}}}))},e.openRealPasswordModal=function(t){e.props.setAccountType(t),e.props.openPasswordModal()},e}return t=o,(n=[{key:"componentDidMount",value:function(){this.updateActiveIndex(),this.openResetPassword(),this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(e){this.updateActiveIndex(),this.props.checkShouldOpenAccount(),e.is_mt5_allowed===this.props.is_mt5_allowed||this.props.is_mt5_allowed||this.history.push(g.a.trade)}},{key:"render",value:function(){var e=this.props,t=e.beginRealSignupForMt5,n=e.createMT5Account,a=e.is_loading,r=e.has_mt5_account,o=e.has_real_account,i=e.NotificationMessages,s=e.account_settings;return c.createElement("div",{className:"mt5-dashboard__container"},c.createElement(i,null),c.createElement("div",{className:"mt5-dashboard"},c.createElement("div",{className:"mt5-dashboard__welcome-message"},c.createElement("h1",{className:"mt5-dashboard__welcome-message--heading"},c.createElement(v.Localize,{i18n_default_text:"Welcome to your MetaTrader 5 (DMT5 account dashboard)"}))),c.createElement("div",{className:"mt5-dashboard__accounts-display"},c.createElement(Rn,{is_visible:this.state.password_manager.is_visible,selected_login:this.state.password_manager.selected_login,selected_account:this.state.password_manager.selected_account,selected_account_group:this.state.password_manager.selected_account_group,selected_account_type:this.state.password_manager.selected_account_type,toggleModal:this.togglePasswordManagerModal}),c.createElement(H.a,{active_index:this.state.active_index,top:!0,center:!0,onTabItemClick:this.updateActiveIndex},c.createElement("div",{label:Object(v.localize)("Real account")},a&&c.createElement(G,null),!a&&c.createElement(c.Fragment,null,!o&&c.createElement(J,{onClickSignup:t}),c.createElement(Ca,{current_list:this.props.current_list,account_status:this.props.account_status,has_mt5_account:r,onSelectAccount:n,account_settings:s,is_pending_authentication:this.props.is_pending_authentication,is_fully_authenticated:this.props.is_fully_authenticated,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal,openPasswordModal:this.openRealPasswordModal,has_real_account:o}))),c.createElement("div",{label:Object(v.localize)("Demo account")},c.createElement(Na,{is_loading:a,has_mt5_account:r,current_list:this.props.current_list,onSelectAccount:n,openAccountTransfer:this.openAccountTransfer,openPasswordManager:this.togglePasswordManagerModal}))),c.createElement("div",{className:"mt5-dashboard__info"},c.createElement("div",{className:"mt5-dashboard__info-description"},c.createElement(v.Localize,{i18n_default_text:"Use these in your apps"})),c.createElement(fa,{display_name:"Deriv Limited",text_copy:"Deriv Limited",label:Object(v.localize)("Broker"),info_msg:Object(v.localize)("Click here to copy broker name."),success_msg:Object(v.localize)("Broker name copied!")}),c.createElement(fa,{display_name:ln(this.state.is_demo_tab),text_copy:ln(this.state.is_demo_tab),label:Object(v.localize)("Server"),info_msg:Object(v.localize)("Click here to copy server name."),success_msg:Object(v.localize)("Server name copied!")})),c.createElement(cn,null),c.createElement("div",{className:"mt5-dashboard__maintenance"},c.createElement(m.a,{icon:"IcAlertWarning",className:"mt5-dashboard__maintenance-icon"}),c.createElement("div",{className:"mt5-dashboard__maintenance-text"},c.createElement(v.Localize,{i18n_default_text:"Server maintenance starting 03:00 GMT every Sunday. This process may take up to 2 hours to complete. <0 />Service may be disrupted during this time.",components:[c.createElement("br",{key:0})]})))),c.createElement(W.a,null,c.createElement(dn,null)),c.createElement(K.a,null,c.createElement("div",{className:"mt5-dashboard__download-center"},c.createElement("h1",{className:"mt5-dashboard__download-center--heading"},c.createElement(v.Localize,{i18n_default_text:"Run MT5 from your browser or download the MT5 app for your devices"})),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile"},c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-devices"},c.createElement(m.a,{icon:"IcMt5DeviceTablet",width:133,height:106}),c.createElement(m.a,{icon:"IcMt5DevicePhone",width:48,height:74})),c.createElement("div",{className:"mt5-dashboard__download-center-options--mobile-links"},c.createElement("a",{href:un("android"),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationGoogle",width:135,height:40})),c.createElement("a",{href:un("ios"),target:"_blank",rel:"noopener noreferrer"},c.createElement(m.a,{icon:"IcInstallationApple",width:135,height:40})))))),c.createElement($n,null),c.createElement(k,null),c.createElement(q,null),c.createElement(Kt,null),c.createElement(ma,null),c.createElement(ua,null)))}}])&&Ra(t.prototype,n),a&&Ra(t,a),o}(c.Component),qa=Object(i.withRouter)(Object(x.b)((function(e){var t=e.client,n=e.modules,a=e.ui;return{beginRealSignupForMt5:n.mt5.beginRealSignupForMt5,checkShouldOpenAccount:n.mt5.checkShouldOpenAccount,createMT5Account:n.mt5.createMT5Account,current_list:n.mt5.current_list,is_logged_in:t.is_logged_in,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableMt5PasswordModal:n.mt5.disableMt5PasswordModal,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:n.mt5.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:n.mt5.enableMt5PasswordModal,is_loading:t.is_populating_mt5_account_list,is_mt5_allowed:t.is_mt5_allowed,has_mt5_account:n.mt5.has_mt5_account,has_real_account:t.has_active_real_account,setAccountType:n.mt5.setAccountType,setMt5PasswordResetModal:n.mt5.setMt5PasswordResetModal,setCurrentAccount:n.mt5.setCurrentAccount,toggleCompareAccounts:n.mt5.toggleCompareAccountsModal,openTopUpModal:a.openTopUpModal,NotificationMessages:a.notification_messages_ui,onMount:n.mt5.onMount,onUnmount:n.mt5.onUnmount}}))(Va))},"./sass/app/modules/mt5/mt5-dashboard.scss":function(e,t,n){},"./sass/app/modules/mt5/mt5.scss":function(e,t,n){},"./templates/_common/components/loading.jsx":function(e,t,n){"use strict";var a=n("../node_modules/classnames/index.js"),r=n.n(a),o=n("react");t.a=function(e){var t=e.className,n=e.is_invisible,a=e.theme,c=e.id;return o.createElement("div",{id:c,className:r()("barspinner","barspinner--".concat(a||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);
//# sourceMappingURL=trader.mt5.18e655fe2542eb53df66.js.map
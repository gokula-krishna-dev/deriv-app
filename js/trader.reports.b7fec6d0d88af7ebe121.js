(window.webpackJsonp_deriv_trader=window.webpackJsonp_deriv_trader||[]).push([["reports"],{"./Modules/Reports/index.js":function(e,t,n){"use strict";n.r(t);var o=n("mobx-react"),r=n("../node_modules/prop-types/index.js"),a=n.n(r),c=n("react"),i=n("react-router-dom"),l=n("@deriv/components/lib/desktop-wrapper"),s=n.n(l),u=(n("@deriv/components/lib/desktop-wrapper.css"),n("@deriv/components/lib/mobile-wrapper")),m=n.n(u),p=(n("@deriv/components/lib/mobile-wrapper.css"),n("@deriv/components/lib/progress-bar")),d=n.n(p),f=(n("@deriv/components/lib/progress-bar.css"),n("@deriv/components/lib/tabs")),_=n.n(f),b=(n("@deriv/components/lib/tabs.css"),n("@deriv/components/lib/data-list")),y=n.n(b),v=(n("@deriv/components/lib/data-list.css"),n("@deriv/components/lib/data-table")),h=n.n(v),g=(n("@deriv/components/lib/data-table.css"),n("@deriv/shared/utils/url")),E=n("@deriv/shared/utils/screen"),w=n("@deriv/translations"),O=n("./App/Components/Elements/ContentLoader/index.js"),j=n("./App/Components/Elements/PositionsDrawer/helpers/index.js"),C=n("./App/Constants/app-config.js"),k=n("./App/Components/Routes/helpers.js"),R=n("./Modules/Reports/Helpers/market-underlying.js"),N=n("@deriv/components/lib/icon"),S=n.n(N),D=(n("@deriv/components/lib/icon.css"),function(e){var t=e.has_selected_date,n=e.component_icon,o=e.localized_message,r=e.localized_period_message;return c.createElement(c.Fragment,null,c.createElement("div",{className:"empty-trade-history"},c.createElement(S.a,{icon:n,className:"empty-trade-history__icon",color:"disabled",size:96}),c.createElement("span",{className:"empty-trade-history__text"},t?r:o)))});D.propTypes={component_icon:a.a.string,has_selected_date:a.a.bool,localized_message:a.a.string,localized_period_message:a.a.string};var x=D,z=n("../node_modules/classnames/index.js"),M=n.n(z),P=n("@deriv/components/lib/label"),T=n.n(P),Y=(n("@deriv/components/lib/label.css"),n("@deriv/components/lib/money")),A=n.n(Y),F=(n("@deriv/components/lib/money.css"),n("./App/Components/Elements/PositionsDrawer/ProgressSlider/positions-progress-slider.jsx")),I=n("./Stores/connect.js"),B=n("./Stores/Modules/Portfolio/Helpers/details.js"),U=function(e){var t=e.contract_info,n=e.is_loading;if(!t)return c.createElement("div",null);var o=t.tick_count&&Object(B.a)(t);return c.createElement(F.a,{is_loading:n,expiry_time:t.date_expiry,has_result:!1,current_tick:o,start_time:t.date_start,ticks_count:t.tick_count})};U.propTypes={contract_info:a.a.object,is_loading:a.a.bool};var L=Object(I.b)((function(e){return{is_loading:e.modules.portfolio.is_loading}}))(U),W=n("./App/Components/Elements/PositionsDrawer/PositionsDrawerCard/multiplier-close-actions.jsx"),H=function(e){return+e.replace(/,/g,"")>=0?"profit":"loss"};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Q(e);if(t){var r=Q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,n,o,r=K(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={movement:null,amount:0},t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t=this;this.setState((function(){return{movement:e.amount>=t.state.amount?"profit":"loss",amount:e.amount}}))}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.currency,o=e.status,r=this.state.movement;return c.createElement("div",{className:"open-positions__indicative"},c.createElement("div",{className:"open-positions__indicative--amount"},c.createElement(A.a,{amount:Math.abs(t),currency:n}),"no-resale"!==o&&0!==t&&c.createElement(c.Fragment,null,"profit"===r&&c.createElement(S.a,{icon:"IcProfit"}),"loss"===r&&c.createElement(S.a,{icon:"IcLoss"}))),"no-resale"===o&&c.createElement("div",{className:"open-positions__indicative-no-resale-msg indicative__no-resale-msg"},Object(w.localize)("Resale not offered")))}}])&&V(t.prototype,n),o&&V(t,o),a}(c.PureComponent);X.propTypes={amount:a.a.number,currency:a.a.string,status:a.a.string};var Z=X,$=n("@deriv/components/lib/popover"),ee=n.n($),te=(n("@deriv/components/lib/popover.css"),n("@deriv/components/lib/icon-trade-types")),ne=n.n(te),oe=(n("@deriv/components/lib/icon-trade-types.css"),n("./Modules/Reports/Helpers/shortcode.js")),re=n.n(oe),ae=function(e){var t=e.payload,n=e.show_description,o="string"==typeof t.shortcode,r=re.a.extractInfoFromShortcode(t.shortcode);return o&&r?c.createElement("div",{className:"market-symbol-icon"},c.createElement("div",{className:"market-symbol-icon-name"},c.createElement(ee.a,{classNameTarget:"market-symbol-icon__popover",classNameBubble:"market-symbol-icon__popover-bubble",alignment:"top",message:Object(R.c)(r.underlying),disable_target_icon:!0},c.createElement(S.a,{icon:r.underlying?"IcUnderlying".concat(r.underlying):"IcUnknown",size:32})),n&&t.display_name),c.createElement("div",{className:"market-symbol-icon-category"},c.createElement(ee.a,{classNameTarget:"category-type-icon__popover",classNameBubble:"category-type-icon__popover-bubble",alignment:"top",message:Object(R.d)(r.category),disable_target_icon:!0},c.createElement(ne.a,{type:re.a.isHighLow({shortcode_info:r})?"".concat(r.category.toLowerCase(),"_barrier"):r.category.toLowerCase(),color:"brand"})),n&&r.category)):["deposit","withdrawal","escrow"].includes(t.action_type)?c.createElement("div",{className:"market-symbol-icon"},"deposit"===t.action_type&&c.createElement(S.a,{icon:"IcCashierDeposit",size:32}),"withdrawal"===t.action_type&&c.createElement(S.a,{icon:"IcCashierWithdrawal",size:32}),"escrow"===t.action_type&&c.createElement(S.a,{icon:"IcCashierDp2p",size:32})):c.createElement("svg",{width:"32",height:"32",className:"unknown-icon"},c.createElement("rect",{width:"32",height:"32"}))};ae.propTypes={action:a.a.string,payload:a.a.object,show_description:a.a.bool};var ce=ae,ie=function(e){var t=e.value,n=e.children,o=H(t);return c.createElement("span",{className:"amount--".concat(o)},n)};ie.propTypes={value:a.a.string};var le=ie,se=n("./templates/_common/components/loading.jsx"),ue=function(e){var t=e.empty_message_component;return c.createElement(c.Fragment,null,e.is_empty&&c.createElement(t,{component_icon:e.component_icon,has_selected_date:e.has_selected_date,localized_message:e.localized_message}),e.is_loading&&c.createElement(se.a,null))};ue.propTypes={component_icon:a.a.string,empty_message_component:a.a.func,has_selected_date:a.a.bool,localized_message:a.a.string};var me=ue,pe=n("./Stores/Modules/Contract/Helpers/multiplier.js"),de=function(e){var t=e.i18n_heading,n=e.i18n_message,o=e.filter_component,r=e.className;return c.createElement("div",{className:M()("reports__meta",r)},c.createElement("div",{className:"reports__meta-description"},c.createElement("h1",{className:"reports__meta-description--heading"},t),c.createElement("p",{className:"reports__meta-description--paragraph"},n)),o&&c.createElement("div",{className:"reports__meta-filter"},o))};function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ee(e);if(t){var r=Ee(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=function(e){return c.createElement(c.Fragment,null,e.is_empty?c.createElement(me,{is_empty:e.is_empty,empty_message_component:x,component_icon:e.component_icon,localized_message:Object(w.localize)("You have no open positions yet.")}):e.children)},Oe=function(e){var t=e.className,n=e.columns,o=e.component_icon,r=e.currency,a=e.active_positions,i=e.is_loading,l=e.getRowAction,u=e.mobileRowRenderer,p=e.preloaderCheck,d=e.row_size,f=e.totals;return c.createElement(c.Fragment,null,i?c.createElement(me,{is_loading:i,empty_message_component:x,component_icon:o,localized_message:Object(w.localize)("You have no open positions yet.")}):r&&c.createElement(c.Fragment,null,c.createElement(s.a,null,c.createElement(we,{component_icon:o,is_empty:0===a.length},c.createElement(h.a,{className:t,columns:n,preloaderCheck:p,footer:f,data_source:a,getRowAction:l,getRowSize:function(){return d},custom_width:"100%",content_loader:O.b},c.createElement(me,{is_loading:i})))),c.createElement(m.a,null,c.createElement(we,{component_icon:o,is_empty:0===a.length},c.createElement(y.a,{className:t,data_source:a,footer:f,rowRenderer:u,getRowAction:l,custom_width:"100%",getRowSize:function(){return 194}},c.createElement(me,{is_loading:i}))))))},je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(a,e);var t,n,o,r=he(a);function a(){var e;be(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={active_index:e.props.is_multiplier?1:0},e.mobileRowRenderer=function(t){var n=t.row;if(t.is_footer)return c.createElement(c.Fragment,null,c.createElement("span",{className:"open-positions__data-list-footer--title"},"Total"),c.createElement("div",{className:"open-positions__data-list-footer--content"},c.createElement("div",null,c.createElement(y.a.Cell,{row:n,column:e.columns_map.purchase}),c.createElement(y.a.Cell,{row:n,column:e.columns_map.payout})),c.createElement("div",null,c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.indicative}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit}))));var o=e.props.server_time,r=n.contract_info,a=r.date_expiry,i=r.date_start,l=Object(R.a)(r.longcode),s=Object(j.c)(o,i,a)/100;return c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.type}),c.createElement(d.a,{label:l,value:s})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.reference})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.purchase}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.indicative})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.payout}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit})))},e.getRowAction=function(e){return e.is_unsupported?{component:c.createElement(w.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:C.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(g.urlFor)("user/portfoliows",{legacy:!0})})]})}:Object(k.b)(e.id)},e.isPurchaseReceived=function(e){return isNaN(e.purchase)||!e.purchase},e.getTotals=function(e,t){var n;if(t){var o=0,r=0,a=0,c=0,i=0;e.forEach((function(e){a+=+e.contract_info.buy_price,c+=+e.contract_info.bid_price,i+=+e.purchase,e.contract_info&&(r+=e.contract_info.bid_price-e.contract_info.buy_price,e.contract_info.cancellation&&(o+=e.contract_info.cancellation.ask_price||0))})),n={contract_info:{profit:r,buy_price:a,bid_price:c},purchase:i},o>0&&(n.contract_info.cancellation={ask_price:o})}else{var l=0,s=0,u=0,m=0;e.forEach((function(e){l+=+e.indicative,s+=+e.purchase,u+=e.profit_loss,m+=e.payout})),n={indicative:l,purchase:s,profit_loss:u,payout:m}}return n},e.setActiveTabIndex=function(t){e.setState({active_index:t})},e}return t=a,(n=[{key:"componentDidMount",value:function(){Object(E.isMobile)()||this.props.onMount()}},{key:"componentWillUnmount",value:function(){Object(E.isMobile)()||this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.active_positions,n=e.component_icon,o=e.is_loading,r=e.error,a=e.currency,i=e.NotificationMessages,l=e.onClickCancel,u=e.onClickSell,p=e.getPositionById;if(r)return c.createElement("p",null,r);var d=1===this.state.active_index,f=t.filter((function(e){return!e.contract_info||(d?Object(pe.a)(e.contract_info.contract_type):!Object(pe.a)(e.contract_info.contract_type))})),b=this.getTotals(f,d),y={active_positions:f,component_icon:n,currency:a,is_loading:o,mobileRowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,preloaderCheck:this.isPurchaseReceived,totals:b};return this.columns=1===this.state.active_index?function(e){var t=e.currency,n=e.onClickCancel,o=e.onClickSell,r=e.getPositionById;return[{title:"Type",col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?Object(w.localize)("Total"):c.createElement(ce,{action:t,key:n.id,payload:n.contract_info})}},{title:Object(w.localize)("Multiplier"),col_index:"multiplier",renderCellContent:function(e){var t=e.row_obj;return t.contract_info&&t.contract_info.multiplier?"x".concat(t.contract_info.multiplier):""}},{title:Object(w.localize)("Stake"),col_index:"buy_price",renderCellContent:function(e){var n=e.row_obj;if(n.contract_info){var o=(n.contract_info.cancellation||{}).ask_price,r=void 0===o?0:o;return c.createElement(A.a,{amount:n.contract_info.buy_price-r,currency:t})}return""}},{title:Object(w.localize)("Deal cancel. fee"),col_index:"cancellation",renderCellContent:function(e){var n=e.row_obj;return n.contract_info&&n.contract_info.cancellation?c.createElement(A.a,{amount:n.contract_info.cancellation.ask_price,currency:t}):"-"}},{title:Object(w.localize)("Buy price"),col_index:"purchase",renderCellContent:function(e){var n=e.cell_value;return c.createElement(A.a,{amount:n,currency:t})}},{title:c.createElement(w.Localize,{i18n_default_text:"Take profit<0 />Stop loss",components:[c.createElement("br",{key:0})]}),col_index:"limit_order",renderCellContent:function(e){var n,o=e.row_obj;if(e.is_footer)return"";var r=(null===(n=o.contract_info)||void 0===n?void 0:n.limit_order)||{},a=r.take_profit,i=r.stop_loss;return c.createElement(c.Fragment,null,c.createElement("div",null,a?c.createElement(A.a,{has_sign:!0,amount:a.order_amount,currency:t}):"-"),c.createElement("div",null,i?c.createElement(A.a,{has_sign:!0,amount:i.order_amount,currency:t}):"-"))}},{title:Object(w.localize)("Current stake"),col_index:"bid_price",renderCellContent:function(e){var n=e.row_obj;if(e.is_footer)return"";if(!n.contract_info||!n.contract_info.bid_price)return"-";var o=n.contract_info.bid_price-n.contract_info.buy_price;return c.createElement("div",{className:M()("open-positions__bid_price",{"open-positions__bid_price--negative":o<0,"open-positions__bid_price--positive":o>0})},c.createElement(A.a,{amount:n.contract_info.bid_price,currency:t}))}},{title:c.createElement(w.Localize,{i18n_default_text:"Total<0 />profit/loss",components:[c.createElement("br",{key:0})]}),col_index:"profit",renderCellContent:function(e){var n=e.row_obj;if(!n.contract_info||!n.contract_info.profit)return null;var o=n.contract_info.bid_price-n.contract_info.buy_price;return c.createElement("div",{className:M()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},c.createElement(A.a,{amount:Math.abs(o),currency:t}),c.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?c.createElement(S.a,{icon:"IcProfit"}):c.createElement(S.a,{icon:"IcLoss"})))}},{title:Object(w.localize)("Action"),col_index:"action",renderCellContent:function(e){var t=e.row_obj;if(e.is_footer)return c.createElement("div",{className:"open-positions__row-action"});var a=t.contract_info,i=(r(a.contract_id)||{}).is_sell_requested;return c.createElement("div",{className:"open-positions__row-action"},c.createElement(W.a,{contract_info:a,is_sell_requested:i,onClickCancel:n,onClickSell:o}))}}]}({currency:a,onClickCancel:l,onClickSell:u,getPositionById:p}):function(e){return[{title:"Type",col_index:"type",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return e.is_footer?Object(w.localize)("Total"):c.createElement(ce,{action:t,key:n.id,payload:n.contract_info})}},{title:Object(w.localize)("Ref. ID"),col_index:"reference"},{title:Object(w.localize)("Buy price"),col_index:"purchase",renderCellContent:function(t){var n=t.cell_value;return c.createElement(A.a,{amount:n,currency:e})}},{title:Object(w.localize)("Potential payout"),col_index:"payout",renderCellContent:function(t){var n=t.cell_value;return n?c.createElement(A.a,{amount:n,currency:e}):c.createElement("span",null,"-")}},{title:Object(w.localize)("Potential profit/loss"),col_index:"profit",renderCellContent:function(t){var n=t.row_obj;if(n.profit_loss||n.contract_info&&n.contract_info.profit){var o=n.profit_loss||n.contract_info.profit;return c.createElement("div",{className:M()("open-positions__profit-loss",{"open-positions__profit-loss--negative":o<0,"open-positions__profit-loss--positive":o>0})},c.createElement(A.a,{amount:Math.abs(o),currency:e}),c.createElement("div",{className:"open-positions__profit-loss--movement"},o>0?c.createElement(S.a,{icon:"IcProfit"}):c.createElement(S.a,{icon:"IcLoss"})))}}},{title:Object(w.localize)("Indicative price"),col_index:"indicative",renderCellContent:function(t){var n=t.cell_value,o=t.row_obj;return c.createElement(Z,{amount:+n,currency:e,status:o.contract_info&&!o.is_valid_to_sell?"no-resale":""})}},{title:Object(w.localize)("Remaining time"),col_index:"id",renderCellContent:function(e){var t=e.row_obj;return c.createElement(L,{contract_info:t.contract_info})}}]}(a),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(i,null),c.createElement(de,{i18n_heading:Object(w.localize)("Open positions"),i18n_message:Object(w.localize)("View all active trades on your account that can still incur a profit or a loss.")}),c.createElement(s.a,null,c.createElement(_.a,{active_index:this.state.active_index,className:"open-positions",onTabItemClick:this.setActiveTabIndex,top:!0,header_fit_content:!0},c.createElement("div",{label:Object(w.localize)("Options")},c.createElement(Oe,_e({className:"open-positions",columns:this.columns},y,{row_size:63}))),c.createElement("div",{label:Object(w.localize)("Multipliers")},c.createElement(Oe,_e({className:"open-positions-multiplier open-positions",columns:this.columns,row_size:68},y))))),c.createElement(m.a,null,c.createElement(Oe,_e({className:"open-positions",columns:this.columns},y))))}}])&&ye(t.prototype,n),o&&ye(t,o),a}(c.Component);je.propTypes={active_positions:o.PropTypes.arrayOrObservableArray,component_icon:a.a.string,currency:a.a.string,error:a.a.string,history:a.a.object,is_loading:a.a.bool,is_mobile:a.a.bool,is_tablet:a.a.bool,onMount:a.a.func,onUnmount:a.a.func,server_time:a.a.object,totals:a.a.object};var Ce=Object(I.b)((function(e){var t=e.modules,n=e.client,o=e.common,r=e.ui;return{currency:n.currency,active_positions:t.portfolio.active_positions_filtered,error:t.portfolio.error,getPositionById:t.portfolio.getPositionById,is_loading:t.portfolio.is_loading,onClickCancel:t.portfolio.onClickCancel,onClickSell:t.portfolio.onClickSell,onMount:t.portfolio.onMount,onUnmount:t.portfolio.onUnmount,is_multiplier:t.trade.is_multiplier,NotificationMessages:r.notification_messages_ui,server_time:o.server_time}}))(Object(i.withRouter)(je)),ke=n("react-router"),Re=n("../node_modules/react-loadable/lib/index.js"),Ne=n.n(Re),Se=n("@deriv/shared/utils/date"),De=n("./App/Components/Form/InputField/input-field.jsx"),xe=n("@deriv/components/lib/mobile-dialog"),ze=n.n(xe),Me=(n("@deriv/components/lib/mobile-dialog.css"),n("@deriv/components/lib/button")),Pe=n.n(Me),Te=(n("@deriv/components/lib/button.css"),n("@deriv/components/lib/date-picker")),Ye=n.n(Te);n("@deriv/components/lib/date-picker.css");function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Le(e);if(t){var r=Le(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(e){var t=e.id,n=e.className,o=e.selected_value,r=e.value,a=e.label,i=e.onChange;return c.createElement("label",{htmlFor:t,className:M()("composite-calendar-modal__radio",n,{"composite-calendar-modal__radio--selected":o===r}),onClick:function(){return i({label:a,value:r})}},c.createElement("input",{className:"composite-calendar-modal__radio-input",id:t,type:"radio",value:r}),c.createElement("span",{className:M()("composite-calendar-modal__radio-circle",{"composite-calendar-modal__radio-circle--selected":o===r})}),c.createElement("p",{className:"composite-calendar-modal__radio-label"},a))},He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(a,e);var t,n,o,r=Be(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).applyDateRange=function(){var e=t.state.selected_date_range;e.onClick?t.selectDateRange(e):"custom"===e.value&&t.selectCustomDateRange(),t.setState({applied_date_range:e,open:!1})},t.selectToday=function(){var e={duration:0,label:Object(w.localize)("Today")};t.selectDateRange(e,!0),t.setState({applied_date_range:e,selected_date_range:e,open:!1})},t.selectDate=function(e,n){var o;t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({selected_date_range:{value:"custom"}},n,(null===(o=e.target)||void 0===o?void 0:o.value)?Object(Se.toMoment)(e.target.value).format("DD MMM YYYY"):""))},t.onDateRangeChange=function(e){var n=t.props.duration_list.find((function(t){return e&&t.value===e.value}))||e;t.setState({selected_date_range:n})},t.openDialog=function(){var e=t.state.applied_date_range;t.setState({open:!0,selected_date_range:e})};var n=t.props,o=n.duration_list,c=n.input_date_range,i=n.from,l=n.to,s=i&&Object(Se.toMoment)(i).format("DD MMM YYYY"),u=i&&Object(Se.toMoment)(l).format("DD MMM YYYY"),m=c||o.find((function(e){return"all_time"===e.value}));return t.state={from:s,to:u,applied_date_range:m,selected_date_range:m},t}return t=a,(n=[{key:"selectDateRange",value:function(e,t){var n=e.duration;this.props.onChange({from:t||n?Object(Se.toMoment)().startOf("day").subtract(n,"day").add(1,"s").unix():null,to:Object(Se.toMoment)().endOf("day").unix(),is_batch:!0},{date_range:e})}},{key:"selectCustomDateRange",value:function(){var e=this.state.selected_date_range,t=Object(Se.toMoment)().format("DD MMM YYYY"),n=this.state,o=n.from,r=n.to;o=o||r||t,r=r||t;var a=Object.assign(e,{label:"".concat(o," - ").concat(r)});this.props.onChange({from:Object(Se.toMoment)(o,"DD MMM YYYY").startOf("day").add(1,"s").unix(),to:Object(Se.toMoment)(r,"DD MMM YYYY").endOf("day").unix(),is_batch:!0},{date_range:a})}},{key:"getMobileFooter",value:function(){var e=this;return c.createElement("div",{className:"composite-calendar-modal__actions"},c.createElement(Pe.a,{className:"composite-calendar-modal__actions__cancel",text:Object(w.localize)("Cancel"),onClick:function(){return e.setState({open:!1})},has_effect:!0,secondary:!0,large:!0}),c.createElement(Pe.a,{className:"composite-calendar-modal__actions__ok",text:Object(w.localize)("OK"),onClick:this.applyDateRange,has_effect:!0,primary:!0,large:!0}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,o=t.applied_date_range,r=t.selected_date_range,a=this.props.duration_list,i=Object(Se.toMoment)().format("YYYY-MM-DD"),l=this.state.to?Object(Se.toMoment)(this.state.to,"DD MMM YYYY").format("YYYY-MM-DD"):i,s=this.state.from&&Object(Se.toMoment)(this.state.from,"DD MMM YYYY").format("YYYY-MM-DD");return c.createElement(c.Fragment,null,c.createElement("div",{className:"composite-calendar__input-fields composite-calendar__input-fields--fill"},c.createElement(De.a,{id:"dt_calendar_input",is_read_only:!0,icon:function(){return c.createElement(S.a,{icon:"IcCalendarDatefrom",className:"inline-icon"})},onClick:this.openDialog,value:o.label})),c.createElement(ze.a,{portal_element_id:"modal_root",title:Object(w.localize)("Please select duration"),visible:n,has_content_scroll:!0,onClose:function(){return e.setState({open:!1})},content_height_offset:"94px",footer:this.getMobileFooter()},c.createElement("div",{className:"composite-calendar-modal"},c.createElement("div",{className:"composite-calendar-modal__radio-group"},a.map((function(t){return c.createElement(We,{id:"composite-calendar-modal__radio__".concat(t.value),key:t.value,value:t.value,label:t.label,selected_value:r.value,onChange:e.onDateRangeChange})}))),c.createElement("div",{className:"composite-calendar-modal__custom"},c.createElement(We,{id:"composite-calendar-modal__custom-radio",className:"composite-calendar-modal__custom-radio",value:"custom",label:Object(w.localize)("Custom"),selected_value:r.value,onChange:this.onDateRangeChange}),c.createElement("div",{className:"composite-calendar-modal__custom-date-range"},c.createElement(Ye.a,{className:"composite-calendar-modal__custom-date-range-start-date",is_nativepicker:!0,placeholder:Object(w.localize)("Start date"),value:this.state.from,max_date:l,onChange:function(t){return e.selectDate(t,"from")}}),c.createElement(Ye.a,{className:"composite-calendar-modal__custom-date-range-end-date",is_nativepicker:!0,placeholder:Object(w.localize)("End date"),value:this.state.to,max_date:i,min_date:s,onChange:function(t){return e.selectDate(t,"to")}}))),c.createElement(Pe.a,{className:"composite-calendar-modal__actions-today",text:Object(w.localize)("Back to today"),onClick:this.selectToday,has_effect:!0,tertiary:!0,large:!0}))))}}])&&Fe(t.prototype,n),o&&Fe(t,o),a}(c.PureComponent);He.propTypes={duration_list:a.a.array,from:a.a.number,onChange:a.a.func,to:a.a.number};var qe=He,Ve=function(e){var t=e.onClick,n=e.is_active,o=e.label;return c.createElement("li",{className:M()({"composite-calendar__prepopulated-list--is-active":n}),onClick:t},o)};Ve.propTypes={label:a.a.oneOfType([a.a.func,a.a.node,a.a.array]),is_active:a.a.bool,onClick:a.a.func};var Je=Ve;function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ge(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Qe=function(e){var t=e.items,n=e.from,o=e.to;return c.createElement("ul",{className:"composite-calendar__prepopulated-list"},t.map((function(e){var t=e.duration,r=Ge(e,["duration"]),a=function(e,t,n){return 0===n?Object(Se.toMoment)().endOf("day").unix()===t&&null===e:Math.ceil(t/86400)-Math.ceil(e/86400)===n}(n,o,t);return c.createElement(Je,Ke({key:t,is_active:a},r))})))};Qe.propTypes={items:a.a.array};var Xe=Qe;function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ct(e);if(t){var r=ct(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var it=Ne()({loader:function(){return n.e("two-month-picker").then(n.bind(null,"./App/Components/Form/CompositeCalendar/two-month-picker.jsx"))},loading:function(){return null},render:function(e,t){var n=e.default;return c.createElement(n,t)}}),lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(a,e);var t,n,o,r=ot(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={show_to:!1,show_from:!1,list:[{value:"all_time",label:Object(w.localize)("All time"),onClick:function(){return t.selectDateRange()},duration:0},{value:"last_7_days",label:Object(w.localize)("Last 7 days"),onClick:function(){return t.selectDateRange(7)},duration:7},{value:"last_30_days",label:Object(w.localize)("Last 30 days"),onClick:function(){return t.selectDateRange(30)},duration:30},{value:"last_60_days",label:Object(w.localize)("Last 60 days"),onClick:function(){return t.selectDateRange(60)},duration:60},{value:"last_quarter",label:Object(w.localize)("Last quarter"),onClick:function(){return t.selectDateRange(90)},duration:90}]},t.setWrapperRef=t.setWrapperRef.bind(at(t)),t.handleClickOutside=t.handleClickOutside.bind(at(t)),t}return t=a,(n=[{key:"selectDateRange",value:function(e){this.hideCalendar(),this.applyBatch({from:e?Object(Se.toMoment)().startOf("day").subtract(e,"day").add(1,"s").unix():null,to:Object(Se.toMoment)().endOf("day").unix(),is_batch:!0})}},{key:"hideCalendar",value:function(){this.setState({show_from:!1,show_to:!1})}},{key:"showCalendar",value:function(e){this.setState(et({},"show_".concat(e),!0))}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),this.hideCalendar())}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setToDate",value:function(e){this.updateState("to",Object(Se.epochToMoment)(e).endOf("day").unix())}},{key:"setFromDate",value:function(e){this.updateState("from",e),this.hideCalendar()}},{key:"updateState",value:function(e,t){this.apply(e,t),this.hideCalendar()}},{key:"applyBatch",value:function(e){this.props.onChange(e)}},{key:"apply",value:function(e,t){this.applyBatch(et({},e,t))}},{key:"isPeriodDisabledTo",value:function(e){return e+1<=this.props.from||e>Object(Se.toMoment)().endOf("day").unix()}},{key:"isPeriodDisabledFrom",value:function(e){return e-1>=this.props.to}},{key:"render",value:function(){var e=this.state,t=e.show_from,n=e.show_to,o=e.list,r=this.props,a=r.to,i=r.from;return c.createElement(c.Fragment,null,c.createElement(s.a,null,c.createElement("div",{id:"dt_composite_calendar_inputs",className:"composite-calendar__input-fields"},c.createElement(De.a,{id:"dt_calendar_input_from",is_read_only:!0,placeholder:Object(w.localize)("Date from"),icon:function(){return c.createElement(S.a,{icon:"IcCalendarDatefrom",className:"inline-icon"})},onClick:this.showCalendar.bind(this,"from"),value:this.from_date_label}),c.createElement(De.a,{id:"dt_calendar_input_to",is_read_only:!0,placeholder:Object(w.localize)("Date to"),icon:function(){return c.createElement(S.a,{icon:"IcCalendarDateto",className:"inline-icon"})},onClick:this.showCalendar.bind(this,"to"),value:this.to_date_label})),n&&c.createElement("div",{className:"composite-calendar",ref:this.setWrapperRef},c.createElement(Xe,{from:i,to:a,items:o}),c.createElement(it,{value:a,onChange:this.setToDate.bind(this),isPeriodDisabled:this.isPeriodDisabledTo.bind(this)})),t&&c.createElement("div",{className:"composite-calendar",ref:this.setWrapperRef},c.createElement(Xe,{from:i,to:a,items:o}),c.createElement(it,{value:i,onChange:this.setFromDate.bind(this),isPeriodDisabled:this.isPeriodDisabledFrom.bind(this)}))),c.createElement(m.a,null,c.createElement(qe,$e({duration_list:this.state.list},this.props))))}},{key:"to_date_label",get:function(){var e=Object(Se.epochToMoment)(this.props.to);return 0===Object(Se.daysFromTodayTo)(e)?Object(w.localize)("Today"):e.format("MMM, DD YYYY")}},{key:"from_date_label",get:function(){var e=Object(Se.epochToMoment)(this.props.from);return this.props.from?e.format("MMM, DD YYYY"):""}}])&&tt(t.prototype,n),o&&tt(t,o),a}(c.PureComponent);lt.propTypes={from:a.a.number,onChange:a.a.func,to:a.a.number};var st=lt,ut=n("./Constants/index.js");function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=yt(e);if(t){var r=yt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return bt(this,n)}}function bt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(a,e);var t,n,o,r=_t(a);function a(){var e;pt(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).mobileRowRenderer=function(t){var n=t.row,o=t.is_footer,r=Object(R.a)(n.longcode),a="duration-type__".concat(r.toLowerCase());return o?c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.action_type,is_footer:o}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit_loss,is_footer:o})):c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.action_type}),c.createElement("div",{className:M()("duration-type",a)},c.createElement("div",{className:M()("duration-type__background","".concat(a,"__background"))}),c.createElement("span",{className:"".concat(a,"__label")},Object(w.localize)(r)))),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.transaction_id}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.buy_price})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.purchase_time}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.sell_price})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.sell_time}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.profit_loss})))},e.getRowAction=function(e){return Object(ut.c)()[re.a.extractInfoFromShortcode(e.shortcode).category.toUpperCase()]?Object(k.b)(e.contract_id):{component:c.createElement(w.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:C.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(g.urlFor)("user/profit_tablews",{legacy:!0})})]})}},e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.component_icon,n=e.currency,o=e.data,r=e.date_from,a=e.date_to,i=e.filtered_date_range,l=e.is_empty,u=e.is_loading,p=e.error,d=e.handleDateChange,f=e.handleScroll,_=e.has_selected_date,b=e.totals;if(p)return c.createElement("p",null,p);var v=c.createElement(c.Fragment,null,c.createElement(st,{input_date_range:i,onChange:d,from:r,to:a}));return this.columns=function(e,t){return[{key:"icon",title:"",col_index:"action_type",renderCellContent:function(e){var n=e.cell_value,o=e.row_obj;return e.is_footer?Object(w.localize)("Profit/loss on the last {{item_count}} contracts",{item_count:t}):c.createElement(ce,{action:n,key:o.transaction_id,payload:o})}},{title:Object(w.localize)("Ref. ID"),col_index:"transaction_id"},{title:Object(w.localize)("Buy time"),col_index:"purchase_time"},{title:Object(w.localize)("Buy price"),col_index:"buy_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":c.createElement(A.a,{amount:n,currency:e})}},{title:Object(w.localize)("Sell time"),col_index:"sell_time",renderHeader:function(e){var t=e.title;return c.createElement(c.Fragment,null,c.createElement("span",null,t),c.createElement(S.a,{icon:"IcContractFlag"}))}},{title:Object(w.localize)("Sell price"),col_index:"sell_price",renderCellContent:function(t){var n=t.cell_value;return t.is_footer?"":c.createElement(A.a,{amount:n,currency:e})}},{title:Object(w.localize)("Profit/Loss"),col_index:"profit_loss",renderCellContent:function(t){var n=t.cell_value;return c.createElement(le,{value:n},c.createElement(A.a,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}}]}(n,o.length),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(de,{i18n_heading:Object(w.localize)("Profit table"),i18n_message:Object(w.localize)("View all trades purchased on your account, and a summary of your total profit/loss."),filter_component:v}),0===o.length||l?c.createElement(me,{is_loading:u,has_selected_date:_,is_empty:l,empty_message_component:x,component_icon:t,localized_message:Object(w.localize)("You have no trading activity yet."),localized_period_message:Object(w.localize)("You have no trading activity for this period.")}):c.createElement(c.Fragment,null,c.createElement(s.a,null,c.createElement(h.a,{className:"profit-table",data_source:o,columns:this.columns,onScroll:f,footer:b,is_empty:l,getRowAction:this.getRowAction,custom_width:"100%",getRowSize:function(){return 63},content_loader:O.b},c.createElement(me,{is_loading:u}))),c.createElement(m.a,null,c.createElement(y.a,{className:"profit-table",data_source:o,rowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,onScroll:f,footer:b,custom_width:"100%",getRowSize:function(){return 204}},c.createElement(me,{is_loading:u})))))}}])&&dt(t.prototype,n),o&&dt(t,o),a}(c.Component);vt.propTypes={component_icon:a.a.string,currency:a.a.string,data:o.PropTypes.arrayOrObservableArray,date_from:a.a.number,date_to:a.a.number,error:a.a.string,filtered_date_range:a.a.object,handleDateChange:a.a.func,handleScroll:a.a.func,has_selected_date:a.a.bool,history:a.a.object,is_empty:a.a.bool,is_loading:a.a.bool,onMount:a.a.func,onUnmount:a.a.func,totals:a.a.object};var ht=Object(I.b)((function(e){var t=e.modules;return{currency:e.client.currency,data:t.profit_table.data_source,date_from:t.profit_table.date_from,date_to:t.profit_table.date_to,error:t.profit_table.error,filtered_date_range:t.profit_table.filtered_date_range,handleScroll:t.profit_table.handleScroll,handleDateChange:t.profit_table.handleDateChange,has_selected_date:t.profit_table.has_selected_date,is_empty:t.profit_table.is_empty,is_loading:t.profit_table.is_loading,onMount:t.profit_table.onMount,onUnmount:t.profit_table.onUnmount,totals:t.profit_table.totals}}))(Object(ke.withRouter)(vt));function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=kt(e);if(t){var r=kt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ct(this,n)}}function Ct(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(a,e);var t,n,o,r=jt(a);function a(){var e;Et(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).mobileRowRenderer=function(t){var n=t.row;return c.createElement(c.Fragment,null,c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.icon}),c.createElement(y.a.Cell,{row:n,column:e.columns_map.action_type})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.refid}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.balance})),c.createElement("div",{className:"data-list__row"},c.createElement(y.a.Cell,{row:n,column:e.columns_map.date}),c.createElement(y.a.Cell,{className:"data-list__row-cell--amount",row:n,column:e.columns_map.amount})))},e.getRowAction=function(e){var t;return e.id&&["buy","sell"].includes(e.action_type)?t=Object(ut.c)()[re.a.extractInfoFromShortcode(e.shortcode).category.toUpperCase()]?Object(k.b)(e.id):{component:c.createElement(w.Localize,{i18n_default_text:"This trade type is currently not supported on {{website_name}}. Please go to <0>Binary.com</0> for details.",values:{website_name:C.website_name},components:[c.createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:Object(g.urlFor)("user/statementws",{legacy:!0})})]})}:["deposit","withdrawal"].includes(e.action_type)&&(t={message:e.desc}),t},e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this,t=this.props,n=t.component_icon,o=t.currency,r=t.data,a=t.date_from,i=t.date_to,l=t.is_empty,u=t.is_loading,p=t.error,d=t.filtered_date_range,f=t.handleScroll,_=t.handleDateChange,b=t.has_selected_date;if(p)return c.createElement("p",null,p);var v=c.createElement(c.Fragment,null,c.createElement(st,{input_date_range:d,onChange:_,from:a,to:i}));return this.columns=function(e){return[{key:"icon",title:"",col_index:"icon",renderCellContent:function(e){var t=e.cell_value,n=e.row_obj;return c.createElement(ce,{action:t,key:n.transaction_id,payload:n})}},{title:Object(w.localize)("Ref. ID"),col_index:"refid"},{title:Object(w.localize)("Transaction time"),col_index:"date"},{key:"mode",title:Object(w.localize)("Transaction"),col_index:"action_type",renderCellContent:function(e){var t,n,o=e.cell_value,r=e.row_obj;return c.createElement(T.a,{mode:(t=o,n={deposit:"warn",withdrawal:"info",sell:"danger",buy:"success",default:"default",escrow:"default-invert"},Object.keys(n).find((function(e){return e===t}))?n[t]:n.default)},r.action)}},{title:Object(w.localize)("Credit/Debit"),col_index:"amount",renderCellContent:function(t){var n=t.cell_value;return c.createElement("div",{className:"amount--".concat(H(n))},c.createElement(A.a,{has_sign:!0,amount:n.replace(/[,]+/g,""),currency:e}))}},{title:Object(w.localize)("Balance"),col_index:"balance",renderCellContent:function(t){var n=t.cell_value;return c.createElement(A.a,{amount:n.replace(/[,]+/g,""),currency:e})}}]}(o),this.columns_map=this.columns.reduce((function(e,t){return e[t.col_index]=t,e}),{}),c.createElement(c.Fragment,null,c.createElement(de,{i18n_heading:Object(w.localize)("Statement"),i18n_message:Object(w.localize)("View all transactions on your account, including trades, deposits, and withdrawals."),filter_component:v}),0===r.length||l?c.createElement(me,{is_loading:u,has_selected_date:b,is_empty:l,empty_message_component:x,component_icon:n,localized_message:Object(w.localize)("You have no transactions yet."),localized_period_message:Object(w.localize)("You have no transactions for this period.")}):c.createElement(c.Fragment,null,c.createElement(s.a,null,c.createElement(h.a,{className:"statement",data_source:r,columns:this.columns,onScroll:f,getRowAction:function(t){return e.getRowAction(t)},is_empty:l,custom_width:"100%",getRowSize:function(){return 63},content_loader:O.b},c.createElement(me,{is_loading:u}))),c.createElement(m.a,null,c.createElement(y.a,{className:"statement",data_source:r,rowRenderer:this.mobileRowRenderer,getRowAction:this.getRowAction,onScroll:f,custom_width:"100%",getRowSize:function(){return 162}},c.createElement(me,{is_loading:u})))))}}])&&wt(t.prototype,n),o&&wt(t,o),a}(c.Component);Rt.propTypes={component_icon:a.a.string,data:o.PropTypes.arrayOrObservableArray,date_from:a.a.number,date_to:a.a.number,error:a.a.string,filtered_date_range:a.a.object,handleScroll:a.a.func,has_selected_date:a.a.bool,history:a.a.object,is_empty:a.a.bool,is_loading:a.a.bool,onMount:a.a.func,onUnmount:a.a.func};var Nt=Object(I.b)((function(e){var t=e.modules;return{currency:e.client.currency,date_from:t.statement.date_from,date_to:t.statement.date_to,data:t.statement.data_source,error:t.statement.error,filtered_date_range:t.statement.filtered_date_range,handleScroll:t.statement.handleScroll,handleDateChange:t.statement.handleDateChange,has_selected_date:t.statement.has_selected_date,is_empty:t.statement.is_empty,is_loading:t.statement.is_loading,onMount:t.statement.onMount,onUnmount:t.statement.onUnmount}}))(Object(i.withRouter)(Rt)),St=n("@deriv/components/lib/vertical-tab"),Dt=n.n(St),xt=(n("@deriv/components/lib/vertical-tab.css"),n("@deriv/components/lib/fade-wrapper")),zt=n.n(xt),Mt=(n("@deriv/components/lib/fade-wrapper.css"),n("@deriv/components/lib/page-overlay")),Pt=n.n(Mt),Tt=(n("@deriv/components/lib/page-overlay.css"),n("@deriv/shared/utils/route"));n("./sass/app/modules/reports.scss");function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Lt(e);if(t){var r=Lt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ut(this,n)}}function Ut(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(a,e);var t,n,o,r=Bt(a);function a(){var e;At(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).onClickClose=function(){return e.props.routeBackInApp(e.props.history)},e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.toggleReports(!0)}},{key:"componentWillUnmount",value:function(){this.props.toggleReports(!1)}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.routes,r=n.location,a=Object(E.isMobile)()?Object(Tt.getSelectedRoute)({routes:o,pathname:r.pathname}):null;return c.createElement(zt.a,{is_visible:this.props.is_visible,className:"reports-page-wrapper",keyname:"reports-page-wrapper"},c.createElement("div",{className:"reports"},c.createElement(Pt.a,{header:Object(w.localize)("Reports"),onClickClose:this.onClickClose},c.createElement(s.a,null,c.createElement(Dt.a,{alignment:"center",id:"report",is_floating:!0,classNameHeader:"reports__tab-header",current_path:this.props.location.pathname,is_routed:!0,is_full_width:!0,list:(e=[],t.props.routes.forEach((function(t){e.push({default:t.default,icon:t.icon_component,label:t.title,value:t.component,path:t.path})})),e)})),c.createElement(m.a,null,c.createElement("div",{className:"reports__mobile-wrapper"},a&&c.createElement(a.component,{component_icon:a.icon_component}))))))}}])&&Ft(t.prototype,n),o&&Ft(t,o),a}(c.Component);Wt.propTypes={history:a.a.object,is_visible:a.a.bool,location:a.a.object,routes:a.a.arrayOf(a.a.object),toggleReports:a.a.func};var Ht=Object(I.b)((function(e){var t=e.common,n=e.ui;return{routeBackInApp:t.routeBackInApp,is_visible:n.is_reports_visible,toggleReports:n.toggleReports}}))(Object(i.withRouter)(Wt));t.default={OpenPositions:Ce,ProfitTable:ht,Statement:Nt,Reports:Ht}},"./sass/app/modules/reports.scss":function(e,t,n){},"./templates/_common/components/loading.jsx":function(e,t,n){"use strict";var o=n("../node_modules/classnames/index.js"),r=n.n(o),a=n("react");t.a=function(e){var t=e.className,n=e.is_invisible,o=e.theme,c=e.id;return a.createElement("div",{id:c,className:r()("barspinner","barspinner--".concat(o||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return a.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}}}]);
//# sourceMappingURL=trader.reports.b7fec6d0d88af7ebe121.js.map